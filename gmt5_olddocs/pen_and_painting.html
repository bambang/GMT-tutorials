

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-TW" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-TW" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>6. 畫筆與調色技巧 &mdash; GMT 教學手冊v1.2</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript" src="_static/translations.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
 <link href='https://fonts.googleapis.com/css?family=Varela Round' rel='stylesheet'>
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/style.css" type="text/css" />
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜尋" href="search.html" />
    <link rel="next" title="7. XY 點散佈圖" href="scatter_plot.html" />
    <link rel="prev" title="5. 為地形圖上色" href="coloring_topography.html" /> 
</head>
 <script type="text/javascript">var _jf = _jf || [];_jf.push(['p','39630']);_jf.push(['_setFont','sourcehansans-tc-light','css','.sourcehansans-tc-light']);_jf.push(['_setFont','sourcehansans-tc-light','alias','sourcehansans-tc']);_jf.push(['_setFont','sourcehansans-tc-light','weight',200]);_jf.push(['_setFont','sourcehansans-tc-regular','css','.sourcehansans-tc-regular']);_jf.push(['_setFont','sourcehansans-tc-regular','alias','sourcehansans-tc']);_jf.push(['_setFont','sourcehansans-tc-regular','weight',400]);_jf.push(['_setFont','cwtexqyuan','css','.cwtexqyuan']);_jf.push(['_setFont','cwtexqyuan','alias','cwtexqyuan']);_jf.push(['_setFont','cwtexqyuan','weight',500]);_jf.push(['_setFont','xingothic-tc-w7','css','.xingothic-tc-w7']);_jf.push(['_setFont','xingothic-tc-w7','alias','xingothic-tc']);_jf.push(['_setFont','xingothic-tc-w7','weight',700]);_jf.push(['_setFont','jf-jinxuan-medium','css','.jf-jinxuan-medium']);_jf.push(['_setFont','jf-jinxuan-medium','alias','jf-jinxuan']);_jf.push(['_setFont','jf-jinxuan-medium','weight',600]);(function(f,q,c,h,e,i,r,d){var k=f._jf;if(k.constructor===Object){return}var l,t=q.getElementsByTagName("html")[0],a=function(u){for(var v in k){if(k[v][0]==u){if(false===k[v][1].call(k)){break}}}},j=/\S+/g,o=/[\t\r\n\f]/g,b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,g="".trim,s=g&&!g.call("\uFEFF\xA0")?function(u){return u==null?"":g.call(u)}:function(u){return u==null?"":(u+"").replace(b,"")},m=function(y){var w,z,v,u,x=typeof y==="string"&&y;if(x){w=(y||"").match(j)||[];z=t[c]?(" "+t[c]+" ").replace(o," "):" ";if(z){u=0;while((v=w[u++])){if(z.indexOf(" "+v+" ")<0){z+=v+" "}}t[c]=s(z)}}},p=function(y){var w,z,v,u,x=arguments.length===0||typeof y==="string"&&y;if(x){w=(y||"").match(j)||[];z=t[c]?(" "+t[c]+" ").replace(o," "):"";if(z){u=0;while((v=w[u++])){while(z.indexOf(" "+v+" ")>=0){z=z.replace(" "+v+" "," ")}}t[c]=y?s(z):""}}},n;k.push(["_eventActived",function(){p(h);m(e)}]);k.push(["_eventInactived",function(){p(h);m(i)}]);k.addScript=n=function(u,A,w,C,E,B){E=E||function(){};B=B||function(){};var x=q.createElement("script"),z=q.getElementsByTagName("script")[0],v,y=false,D=function(){x.src="";x.onerror=x.onload=x.onreadystatechange=null;x.parentNode.removeChild(x);x=null;a("_eventInactived");B()};if(C){v=setTimeout(function(){D()},C)}x.type=A||"text/javascript";x.async=w;x.onload=x.onreadystatechange=function(G,F){if(!y&&(!x.readyState||/loaded|complete/.test(x.readyState))){y=true;if(C){clearTimeout(v)}x.src="";x.onerror=x.onload=x.onreadystatechange=null;x.parentNode.removeChild(x);x=null;if(!F){setTimeout(function(){E()},200)}}};x.onerror=function(H,G,F){if(C){clearTimeout(v)}D();return true};x.src=u;z.parentNode.insertBefore(x,z)};a("_eventPreload");m(h);n(r,"text/javascript",false,3000)})(this,this.document,"className","jf-loading","jf-active","jf-inactive","//ds.justfont.com/js/stable/v/5.0.2/id/166657211014");</script>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> GMT 教學手冊
          

          
          </a>

          
            
            
              <div class="version">
                1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
 <div class="langcenter"> <nav class="menu"> <ul class="clearfix"> <li class="current-item"> <a href="#" class="clicker">中文 (台灣) <span class="arrow">&#9660;</span></a> <ul class="sub-menu"> <li><a href="pen_and_painting.html">中文 (台灣)</a></li> <li><a href="en/pen_and_painting.html">English</a></li> </ul> </li> </ul> </nav> </div>
 </div>
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro_install.html">1. GMT 簡介與安裝</a></li>
<li class="toctree-l1"><a class="reference internal" href="software.html">2. 推薦搭配的軟體或套件</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_concept.html">3. 基本概念與名詞</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_first_map.html">4. 製作第一張地圖</a></li>
<li class="toctree-l1"><a class="reference internal" href="coloring_topography.html">5. 為地形圖上色</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">6. 畫筆與調色技巧</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id2">6.1. 目標</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id6">6.2. 使用的指令與概念</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id7">6.3. 前置作業</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id9">6.4. 操作流程</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id12">6.5. 指令稿</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id13">6.6. 習題</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="scatter_plot.html">7. XY 點散佈圖</a></li>
<li class="toctree-l1"><a class="reference internal" href="editing_cpt_colorbar.html">8. 色階檔的編修與呈現</a></li>
<li class="toctree-l1"><a class="reference internal" href="layout_design.html">9. 版面設計與地圖的幾何布局</a></li>
<li class="toctree-l1"><a class="reference internal" href="hillshading.html">10. 暈渲地圖</a></li>
<li class="toctree-l1"><a class="reference internal" href="contour_and_profile.html">11. 等高線地圖及地形剖面</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot_vector_data.html">12. 繪製向量式資料</a></li>
<li class="toctree-l1"><a class="reference internal" href="map_elements.html">13. 加入地圖元素</a></li>
<li class="toctree-l1"><a class="reference internal" href="view3d.html">14. 3D 視圖</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_calculator.html">15. 網格計算機</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_img_processing.html">16. 基本影像處理</a></li>
<li class="toctree-l1"><a class="reference internal" href="stat_histogram.html">17. 輸出統計資訊與直方圖</a></li>
<li class="toctree-l1"><a class="reference internal" href="regression_basics.html">18. 進行迴歸分析</a></li>
<li class="toctree-l1"><a class="reference internal" href="focal_mech.html">19. 繪製震源機制解</a></li>
<li class="toctree-l1"><a class="reference internal" href="draping.html">20. 在 3D 地形上覆蓋地圖</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_credit.html">21. 資料來源與誌謝</a></li>
<li class="toctree-l1"><a class="reference internal" href="command_index.html">22. 指令索引</a></li>
<li class="toctree-l1"><a class="reference internal" href="gallery.html">23. 章節地圖索引</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GMT 教學手冊</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>6. 畫筆與調色技巧</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
 <a href="https://github.com/whyjz/GMT-tutorials"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/e7bbb0521b397edbd5fe43e7f760759336b5e05f/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"></a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>6. 畫筆與調色技巧<a class="headerlink" href="#id1" title="本標題的永久連結">¶</a></h1>
<p>為了有效的在地圖上呈現資料，顏色與線條樣式應要謹慎選擇。為地圖挑選合適的配色是門藝術，地圖製作者通常都會花上許多時間，把地圖調整成看起來最調和、最舒服的外觀。這裡我們要介紹如何在 GMT 中操作相關設定，讓你能夠更快的找到心目中的完美配色。</p>
<div class="section" id="id2">
<h2>6.1. 目標<a class="headerlink" href="#id2" title="本標題的永久連結">¶</a></h2>
<p>製作一張中美洲的地圖，海域部份為分層設色地形圖，陸域部份則依國家來著色，如下圖所示。被中美地峽與島嶼群圍起來的區域為<a class="reference external" href="https://zh.wikipedia.org/wiki/%E5%8A%A0%E5%8B%92%E6%AF%94%E6%B5%B7">加勒比海</a>，而左上方的海灣則為<a class="reference external" href="https://zh.wikipedia.org/wiki/%E5%A2%A8%E8%A5%BF%E5%93%A5%E6%B9%BE">墨西哥灣</a>。圖中可以找到此區域的十幾個比較大的國家，也可以發現加勒比海和墨西哥灣，都比東北方的大西洋要淺得多。</p>
<a class="reference external image-reference" href="_images/central_america.png" id="id5"><img alt="_images/central_america_s.png" src="_images/central_america_s.png" /></a>
<p>直接觀看<a class="reference internal" href="#id12">指令稿</a></p>
</div>
<div class="section" id="id6">
<h2>6.2. 使用的指令與概念<a class="headerlink" href="#id6" title="本標題的永久連結">¶</a></h2>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">makecpt</span></code> - <strong>製作或調整色階檔</strong></li>
<li><code class="docutils literal notranslate"><span class="pre">pscoast</span></code> - <strong>為國家上色</strong></li>
<li><code class="docutils literal notranslate"><span class="pre">grdimage</span></code> - <strong>繪製著色影像</strong></li>
<li>如何指定作圖顏色</li>
<li>畫筆的屬性設定</li>
<li>如何製作與修改色階檔</li>
<li>疊加多個圖層</li>
<li>在腳本中使用變數以美化排版</li>
</ul>
</div>
<div class="section" id="id7">
<h2>6.3. 前置作業<a class="headerlink" href="#id7" title="本標題的永久連結">¶</a></h2>
<p>在本章中，我們一樣會使用 <a class="reference external" href="https://www.ngdc.noaa.gov/mgg/global/global.html">ETOPO</a> Bedrock 資料庫來繪製海底地形。有關 <a class="reference external" href="https://www.ngdc.noaa.gov/mgg/global/global.html">ETOPO</a> 的詳細說明，請參閱「<a class="reference internal" href="coloring_topography.html"><span class="doc">為地形圖上色</span></a>」。檔案可以在 <a class="reference external" href="https://www.ngdc.noaa.gov/mgg/global/global.html">ETOPO</a> 的網站下載 (ETOPO1 Bedrock -&gt;
grid-registered: netCDF)，或是使用如下快速連結下載：</p>
<p><a class="reference external" href="https://www.ngdc.noaa.gov/mgg/global/relief/ETOPO1/data/bedrock/grid_registered/netcdf/ETOPO1_Bed_g_gmt4.grd.gz">下載 ETOPO1 Bedrock netCDF 檔</a> (383M，解壓後約 891M)</p>
<p>本次的作圖區域，是 <code class="docutils literal notranslate"><span class="pre">-R-100/1/-50/34r</span></code>，如以下 <em>Google Map</em> 截圖所示。有關 <code class="docutils literal notranslate"><span class="pre">-R</span></code> 的詳細說明，請參閱「<a class="reference internal" href="making_first_map.html"><span class="doc">製作第一張地圖</span></a>」。</p>
<img alt="_images/pen_and_painting_fig1.png" src="_images/pen_and_painting_fig1.png" />
<p>另外，我們這次也會使用到 <a class="reference external" href="http://soliton.vm.bytemark.co.uk/pub/cpt-city">cpt-city</a> 的 <code class="docutils literal notranslate"><span class="pre">mby</span></code> 色階。你可以從<a class="reference external" href="http://soliton.vm.bytemark.co.uk/pub/cpt-city/mby/tn/mby.png.index.html">cpt-city 網頁</a>上下載，也可以直接從<a class="reference download internal" download="" href="_downloads/c035fff865f4931b82ec21e45d136e0c/mby.cpt"><code class="xref download docutils literal notranslate"><span class="pre">這邊</span></code></a>下載。</p>
</div>
<div class="section" id="id9">
<h2>6.4. 操作流程<a class="headerlink" href="#id9" title="本標題的永久連結">¶</a></h2>
<p>我們先來分析一下目標的地圖。在此地圖中有很多不同的元素，依照固定的順序疊加。如果認真檢查，這些元素可以分成三群，由底層到頂層分別為</p>
<ul class="simple">
<li>地形圖</li>
<li>格線，它覆蓋在海底地形上面</li>
<li>國家的著色，它把格線和海底地形都覆蓋掉了</li>
</ul>
<p>因此，我們的 GMT 繪圖腳本，應該也要照如上的順序進行繪圖，也就是說程式碼看起來會長這樣</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>第一段：海底地形圖 <span class="o">(</span>grdimage<span class="o">)</span>
第二段：格線 <span class="o">(</span>可以併在 pscoast -B 的選項來畫<span class="o">)</span>
第三段：國家邊界與著色 <span class="o">(</span>pscoast<span class="o">)</span>
</pre></div>
</div>
<p>海底地形圖和國家著色，都必需要指定繪圖的顏色或色階，所以這裡我們先來看看單一的顏色要怎麼指定。最簡單，並也在之前的章節使用的一種方法，就是指定顏色的名稱。GMT 支援了超過百種顏色的名稱，可以在<a class="reference external" href="http://gmt.soest.hawaii.edu/doc/5.2.1/gmtcolors.html#list-of-colors">這邊</a>查看並使用。例如說以下指令</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pscoast -Ggreen    <span class="c1"># ...後續省略</span>
</pre></div>
</div>
<p>可以把陸域染成綠色。由於這裡我們要著色的是國家，所以得先介紹另外一個 <code class="docutils literal notranslate"><span class="pre">pscoast</span></code>
的選項 <code class="docutils literal notranslate"><span class="pre">-F</span></code> 才行。<code class="docutils literal notranslate"><span class="pre">-F</span></code> 會讀取一個稱為 <a class="reference external" href="https://www.soest.hawaii.edu/pwessel/dcw/">DCW</a>
的資料庫，使用內含的國家邊界資料進行著色。<code class="docutils literal notranslate"><span class="pre">-F</span></code> 的語法大致為</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-F代碼1,代碼2,...+g填色+p畫筆
</pre></div>
</div>
<p>其中的<code class="docutils literal notranslate"><span class="pre">代碼</span></code>指的是 <a class="reference external" href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2">ISO 3166-1 alpha-2</a>
國家名稱的二位字母代碼，例如 <code class="docutils literal notranslate"><span class="pre">TW</span></code> 代表台灣，<code class="docutils literal notranslate"><span class="pre">US</span></code> 代表美國等等。除了可以從維基百科查詢這些代碼以外，也可以輸入以下指令，直接在 GMT 中查詢：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ pscoast -F+l    <span class="c1"># 在螢幕中列出二位字母國碼</span>
<span class="c1"># 或</span>
$ pscoast -F+L    <span class="c1"># 在螢幕中列出二位字母國碼與幾個大國家的省份碼</span>
</pre></div>
</div>
<p>這邊順便舉個方便的技巧：如果你想查詢特定國家 (已經知道英文國名) 的代碼，可以使用 <code class="docutils literal notranslate"><span class="pre">sh</span></code> 內建的
<code class="docutils literal notranslate"><span class="pre">grep</span></code> 指令來輔助查詢。如下這樣：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ pscoast -F+l <span class="p">|</span> grep -i japan
List of ISO <span class="m">3166</span>-1 alpha-2 codes <span class="k">for</span> DCW supported countries:

Africa <span class="o">[</span>AF<span class="o">]</span>:
Antarctica <span class="o">[</span>AN<span class="o">]</span>:
Asia <span class="o">[</span>AS<span class="o">]</span>:
Europe <span class="o">[</span>EU<span class="o">]</span>:
Oceania <span class="o">[</span>OC<span class="o">]</span>:
North America <span class="o">[</span>NA<span class="o">]</span>:
South America <span class="o">[</span>SA<span class="o">]</span>:
  JP    Japan
</pre></div>
</div>
<p>這邊的 <code class="docutils literal notranslate"><span class="pre">-i</span></code> 選項是「大小寫視為相同」之意。你會看到在最後一行中，就出現了日本的代碼 <code class="docutils literal notranslate"><span class="pre">JP</span></code>。</p>
<div class="admonition attention">
<p class="first admonition-title">注意</p>
<ol class="last arabic">
<li><p class="first">在 GMT 5.2 之後的版本，<code class="docutils literal notranslate"><span class="pre">-F</span></code> 換成了 <code class="docutils literal notranslate"><span class="pre">-E</span></code>，但選項內容不變。</p>
</li>
<li><p class="first">如果你的作業系統是 <strong>Windows</strong>，內建會沒有 <code class="docutils literal notranslate"><span class="pre">grep</span></code>，但你可以使用替代的指令
<code class="docutils literal notranslate"><span class="pre">findstr</span></code> 來操作，如下：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ pscoast -F+l <span class="p">|</span> findstr /i japan
</pre></div>
</div>
</li>
</ol>
</div>
<div class="admonition tip">
<p class="first admonition-title">小訣竅</p>
<p>如果你想要使用 <code class="docutils literal notranslate"><span class="pre">grep</span></code> 一次查詢多個國家，可以使用如下語法：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ pscoast -F+l <span class="p">|</span> grep -i <span class="s1">&#39;japan\|singapore\|zealand&#39;</span>
</pre></div>
</div>
<p class="last">這樣程式會一次把日本、新加坡跟紐西蘭的代碼找出來。</p>
</div>
<p>接下來就是<code class="docutils literal notranslate"><span class="pre">填色</span></code>。GMT 實際上支援了六種顏色表達方式，分別為</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>「green」         <span class="c1"># 1. 使用顏色名稱</span>
「255/99/71」     <span class="c1"># 2. 使用 R/G/B 值 (從 0 到 255)，左邊這是蕃茄色</span>
「#87CEEE」       <span class="c1"># 3. 使用 HTML 標記的顏色表示法 (#RRGGBB，十六進位)，左邊這是天藍色</span>
「25-0.86-0.82」  <span class="c1"># 4. 使用 H-S-V 值 (前者從 0 到 255，後兩者從 0 到 1)，左邊這是巧克力色</span>
「8/8/0/2」       <span class="c1"># 5. 使用 C/M/Y/K 值 (百分比表示)，左邊這是薰衣草色</span>
「169」           <span class="c1"># 6. 灰階號碼，此例相當於 R/G/B 的 169/169/169</span>
</pre></div>
</div>
<p>你可以使用你喜歡的表達方式給定顏色。這邊我們要試著幫墨西哥 (代碼 <code class="docutils literal notranslate"><span class="pre">MX</span></code>) 塗上磚紅色，使用 HTML 標記的代碼 <code class="docutils literal notranslate"><span class="pre">#CD5C5C</span></code>，語法如下：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ pscoast -R-100/1/-50/34r -JM6i -FMX+g#CD5C5C -P &gt; central_america.ps
</pre></div>
</div>
<p>成品就會看到有個磚紅色的區塊，這就是墨西哥的國土。</p>
<img alt="_images/pen_and_painting_fig2.png" src="_images/pen_and_painting_fig2.png" />
<p>因為我們等一下會為不同的國家塗上不同的顏色，為了程式碼的美觀，可以把顏色和對應的國家先以變數的方式存放，之後執行 <code class="docutils literal notranslate"><span class="pre">pscoast</span></code> 再使用這些變數。這種方式除了可以整齊排版，更利於之後的編輯修改。每個 shell 指定變數的方式略有不同，這裡以 <code class="docutils literal notranslate"><span class="pre">bash</span></code> 為示範，變數的指定與取方式為：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">變數名稱</span><span class="o">=</span><span class="s1">&#39;變數內容&#39;</span>     <span class="c1"># 指定變數</span>
<span class="si">${</span><span class="nv">變數名稱</span><span class="si">}</span>            <span class="c1"># 存取變數 (這串文字會被&#39;變數內容&#39;取代掉)</span>
</pre></div>
</div>
<p>把上述語法套用到我們的例子中，就像是這樣：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">color1</span><span class="o">=</span><span class="s1">&#39;#CD5C5C&#39;</span>
<span class="nv">colorgroup1</span><span class="o">=</span><span class="s1">&#39;MX,BR,PA&#39;</span>
pscoast -R-100/1/-50/34r -JM6i -F<span class="si">${</span><span class="nv">colorgroup1</span><span class="si">}</span>+g<span class="si">${</span><span class="nv">color1</span><span class="si">}</span> -P &gt; central_america.ps
</pre></div>
</div>
<p>以上腳本可以把墨西哥 (<code class="docutils literal notranslate"><span class="pre">MX</span></code>)、巴西 (<code class="docutils literal notranslate"><span class="pre">BR</span></code>)、巴拿馬 (<code class="docutils literal notranslate"><span class="pre">PA</span></code>) 一次塗上磚紅色。如果你想要更改顏色或國家，只要修改變數 <code class="docutils literal notranslate"><span class="pre">colorgroup1</span></code> 或 <code class="docutils literal notranslate"><span class="pre">color1</span></code> 的內容即可，不需要動到 <code class="docutils literal notranslate"><span class="pre">pscoast</span></code>
的指令。</p>
<div class="admonition tip">
<p class="first admonition-title">小訣竅</p>
<ol class="last arabic simple">
<li>由於不同的指令列環境有不同的變數設定方式，而且是值得另闢章節討論的話題，在此我們先略過這些內容以集中精神在 GMT 指令上。有關於變數指定的細節，請參考你所使用的 shell 如 cmd、bash 或 csh
等的技術專書或網頁。</li>
<li>有許多不錯的網頁調色盤，如 <a class="reference external" href="http://html-color-codes.info/">HTML color codes</a>，可以幫助你用視覺化的方式挑選你想要的顏色，然後再把色碼貼到腳本變數中就行了。好好尋找你想要的顏色吧！</li>
</ol>
</div>
<p>接下來，只要依樣畫葫蘆，把所有的鄰近國家都填上顏色就可以了：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ==== 設定顏色與對應的國家 ====</span>
<span class="c1"># mexico, panama, brazil</span>
<span class="nv">color1</span><span class="o">=</span><span class="s1">&#39;#CD5C5C&#39;</span>
<span class="nv">colorgroup1</span><span class="o">=</span><span class="s1">&#39;MX,BR,PA&#39;</span>
<span class="c1"># guatemala, venezuela, jamaica</span>
<span class="nv">color2</span><span class="o">=</span><span class="s1">&#39;coral&#39;</span>
<span class="nv">colorgroup2</span><span class="o">=</span><span class="s1">&#39;GT,JM,VE&#39;</span>
<span class="c1"># united states, puerto rico, salvador</span>
<span class="nv">color3</span><span class="o">=</span><span class="s1">&#39;240/230/140&#39;</span>
<span class="nv">colorgroup3</span><span class="o">=</span><span class="s1">&#39;US,PR,SV&#39;</span>
<span class="c1"># belize, french guiana, haiti, trinidad and tobago</span>
<span class="nv">color4</span><span class="o">=</span><span class="s1">&#39;0/36/74/4&#39;</span>
<span class="nv">colorgroup4</span><span class="o">=</span><span class="s1">&#39;BZ,GF,HT,TT&#39;</span>
<span class="c1"># honduras, colombia, cuba</span>
<span class="nv">color5</span><span class="o">=</span><span class="s1">&#39;97-0.52-0.94&#39;</span>
<span class="nv">colorgroup5</span><span class="o">=</span><span class="s1">&#39;CO,CU,HN&#39;</span>
<span class="c1"># nicaragua, guyana, bahamas</span>
<span class="nv">color6</span><span class="o">=</span><span class="s1">&#39;250/138/255&#39;</span>
<span class="nv">colorgroup6</span><span class="o">=</span><span class="s1">&#39;BS,GY,NI&#39;</span>
<span class="c1"># costa rica, suriname, dominican</span>
<span class="nv">color7</span><span class="o">=</span><span class="s1">&#39;#8DC740&#39;</span>
<span class="nv">colorgroup7</span><span class="o">=</span><span class="s1">&#39;CR,DO,SR&#39;</span>
<span class="c1"># other countries</span>
<span class="nv">color0</span><span class="o">=</span><span class="s1">&#39;169&#39;</span>

<span class="c1"># ==== 主要指令 ====</span>
    <span class="c1"># 底圖</span>
pscoast -R-100/1/-50/34r -JB-80.27/8.58/-8/24/6i -K -Dh <span class="se">\</span>
        -Bafg -G<span class="si">${</span><span class="nv">color0</span><span class="si">}</span> -P &gt; central_america.ps
    <span class="c1"># 國家上色</span>
pscoast -R -J -O -K -F<span class="si">${</span><span class="nv">colorgroup1</span><span class="si">}</span>+g<span class="si">${</span><span class="nv">color1</span><span class="si">}</span> &gt;&gt; central_america.ps
pscoast -R -J -O -K -F<span class="si">${</span><span class="nv">colorgroup2</span><span class="si">}</span>+g<span class="si">${</span><span class="nv">color2</span><span class="si">}</span> &gt;&gt; central_america.ps
pscoast -R -J -O -K -F<span class="si">${</span><span class="nv">colorgroup3</span><span class="si">}</span>+g<span class="si">${</span><span class="nv">color3</span><span class="si">}</span> &gt;&gt; central_america.ps
pscoast -R -J -O -K -F<span class="si">${</span><span class="nv">colorgroup4</span><span class="si">}</span>+g<span class="si">${</span><span class="nv">color4</span><span class="si">}</span> &gt;&gt; central_america.ps
pscoast -R -J -O -K -F<span class="si">${</span><span class="nv">colorgroup5</span><span class="si">}</span>+g<span class="si">${</span><span class="nv">color5</span><span class="si">}</span> &gt;&gt; central_america.ps
pscoast -R -J -O -K -F<span class="si">${</span><span class="nv">colorgroup6</span><span class="si">}</span>+g<span class="si">${</span><span class="nv">color6</span><span class="si">}</span> &gt;&gt; central_america.ps
pscoast -R -J -O -F<span class="si">${</span><span class="nv">colorgroup7</span><span class="si">}</span>+g<span class="si">${</span><span class="nv">color7</span><span class="si">}</span> &gt;&gt; central_america.ps
</pre></div>
</div>
<p>在<code class="docutils literal notranslate"><span class="pre">設定顏色與對應的國家</span></code>的部份，我們總共指定了 7 種顏色與 22 個國家。<code class="docutils literal notranslate"><span class="pre">color0</span></code>
是灰色，用於中美洲其餘的國家。而在<code class="docutils literal notranslate"><span class="pre">主要指令</span></code>中，<code class="docutils literal notranslate"><span class="pre">底圖</span></code>內的指令會為所有的國家先著上灰色的 <code class="docutils literal notranslate"><span class="pre">color0</span></code>，然後再依照先前指定的顏色鋪上新的圖層 (灰色圖層其實還是在，不過被後來的上色指令掩蓋了)。注意這邊的 <code class="docutils literal notranslate"><span class="pre">-J</span></code> 選項使用了 <code class="docutils literal notranslate"><span class="pre">B</span></code>，這是另一種稱為
<a class="reference external" href="https://zh.wikipedia.org/wiki/%E4%BA%9A%E5%B0%94%E5%8B%83%E6%96%AF%E6%8A%95%E5%BD%B1">Albers 投影</a>的地圖投影法，是一種圓錐型投影，可使地圖上的每個區域面積保持一致。它的語法為</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-JB投影中心經線/投影中心緯線/圓錐上端緯線/圓錐下端緯線/地圖尺寸
</pre></div>
</div>
<p>整個腳本執行的結果如下所示 (中文註解可能要改成英文才可順利執行)。由於格線是下在第一行指令，所以造成了「陸地覆蓋在格線上」的效果。</p>
<img alt="_images/pen_and_painting_fig3.png" src="_images/pen_and_painting_fig3.png" />
<div class="admonition note">
<p class="first admonition-title">備註</p>
<p class="last">關於其他的指令選項如 <code class="docutils literal notranslate"><span class="pre">-O</span></code>、<code class="docutils literal notranslate"><span class="pre">-K</span></code> 的解說，請至「<a class="reference internal" href="making_first_map.html"><span class="doc">製作第一張地圖</span></a>」或「<a class="reference internal" href="coloring_topography.html"><span class="doc">為地形圖上色</span></a>」查看。另外，不知道你有沒有發現換了投影方法的同時，邊框的形式也會跟著變化？有關邊框進一步的設定，請參閱<strong>之後的章節</strong>。</p>
</div>
<p>接下來，我們再為國界和海岸線畫點線，國家就會更突顯出來。在<a class="reference internal" href="making_first_map.html"><span class="doc">製作第一張地圖</span></a>中，我們曾經提及線條的「畫筆樣式」由三個部份組成：<code class="docutils literal notranslate"><span class="pre">粗細,顏色,樣式</span></code>。<code class="docutils literal notranslate"><span class="pre">粗細</span></code> 可以為預先定義好的名稱，像是 <code class="docutils literal notranslate"><span class="pre">thinner</span></code>、<code class="docutils literal notranslate"><span class="pre">thickest</span></code>，<code class="docutils literal notranslate"><span class="pre">fat</span></code>等等，總共有 12 個，所有的名稱可以在<a class="reference external" href="http://gmt.soest.hawaii.edu/doc/5.1.0/GMT_Docs.html#specifying-pen-attributes">此連結</a>查詢。如果你想要自訂粗細，也可以使用 <code class="docutils literal notranslate"><span class="pre">c</span></code> (公分)、<code class="docutils literal notranslate"><span class="pre">i</span></code> (英吋)、<code class="docutils literal notranslate"><span class="pre">p</span></code> (點) 等長度單位，如 <code class="docutils literal notranslate"><span class="pre">0.1c</span></code>
就是 0.1 公分。畫筆的<code class="docutils literal notranslate"><span class="pre">顏色</span></code>與上述的色碼通用，選你喜歡的表達方式即可。畫筆的<code class="docutils literal notranslate"><span class="pre">樣式</span></code>預設是連續線條，你可以使用 <code class="docutils literal notranslate"><span class="pre">-</span></code> (折線) 與 <code class="docutils literal notranslate"><span class="pre">.</span></code> (點) 自由的混搭樣式，如 <code class="docutils literal notranslate"><span class="pre">-..</span></code> 會畫出折線中間間隔兩個點的線條。以下是一些示範：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>thinner,green,-     <span class="c1"># 綠色的細折線</span>
3p,100/0/100,.      <span class="c1"># 3 點寬，深紫色的點線</span>
1c,#555555,--..     <span class="c1"># 1 公分寬，灰色的 &quot;--..&quot; 樣式線條</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">pscoast</span></code> 有三個跟畫線有關的指令，分別為</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-I編號/畫筆          <span class="c1"># 畫上河流</span>
-N編號/畫筆          <span class="c1"># 畫上政治邊界</span>
-W編號/畫筆          <span class="c1"># 畫上水域邊界</span>
</pre></div>
</div>
<p>其中 <code class="docutils literal notranslate"><span class="pre">-I</span></code> 和 <code class="docutils literal notranslate"><span class="pre">-N</span></code> 的編號已在<a class="reference internal" href="coloring_topography.html"><span class="doc">為地形圖上色</span></a>中介紹過，而 <code class="docutils literal notranslate"><span class="pre">-W</span></code> 的編號可以為 <code class="docutils literal notranslate"><span class="pre">1</span></code>、<code class="docutils literal notranslate"><span class="pre">2</span></code>、<code class="docutils literal notranslate"><span class="pre">3</span></code> 及 <code class="docutils literal notranslate"><span class="pre">4</span></code>，分別代表海岸線、湖岸線、湖中島岸線、湖中島中湖岸線。這裡我們就把海岸線和國界線用 <code class="docutils literal notranslate"><span class="pre">thinner</span></code> 等級的線條來畫畫看，順便再用一次 <code class="docutils literal notranslate"><span class="pre">-B</span></code>，把被填色區域的多邊形遮到的部份邊框給補回來。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># (前略)</span>
<span class="c1"># ==== 主要指令 ====</span>
    <span class="c1"># 底圖</span>
pscoast -R-100/1/-50/34r -JB-80.27/8.58/-8/24/6i -K -Dh <span class="se">\</span>
        -Bafg -G<span class="si">${</span><span class="nv">color0</span><span class="si">}</span> -P &gt; central_america.ps
    <span class="c1"># 國家上色</span>
<span class="c1"># (中略)</span>
pscoast -R -J -O -K -F<span class="si">${</span><span class="nv">colorgroup7</span><span class="si">}</span>+g<span class="si">${</span><span class="nv">color7</span><span class="si">}</span> &gt;&gt; central_america.ps
    <span class="c1"># 國界</span>
pscoast -R -J -O -D -W1/thinner -N1/thinner -Bf &gt;&gt; central_america.ps
</pre></div>
</div>
<p>這次的成品看起來就像這樣：</p>
<img alt="_images/pen_and_painting_fig4.png" src="_images/pen_and_painting_fig4.png" />
<p>接下來，我們就要來為海底地形上色了。你當然可以直接使用 <code class="docutils literal notranslate"><span class="pre">grdimage</span></code>，不加任何顏色設定，像是如下的腳本</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># (前略)</span>
<span class="c1"># ==== 主要指令 ====</span>
    <span class="c1"># 底圖</span>
grdimage ETOPO1_Bed_g_gmt4.grd -JB-80.27/8.58/-8/24/6i <span class="se">\</span>
         -R-100/1/-50/34r -P -K &gt; central_america.ps
pscoast -R -J -O -K -Dh -Bafg -G<span class="si">${</span><span class="nv">color0</span><span class="si">}</span> &gt;&gt; central_america.ps
    <span class="c1"># 國家上色</span>
<span class="c1"># (後略)</span>
</pre></div>
</div>
<p>會得到如下的地圖</p>
<a class="reference external image-reference" href="_images/pen_and_painting_fig5.png"><img alt="_images/pen_and_painting_fig5_s.png" src="_images/pen_and_painting_fig5_s.png" /></a>
<p>如果你覺得海床的部份著色很奇怪 (很少見到海是用綠色著色的)，那就是自己動手修改的時候了。第一步當然是從已經建立好的色階表搜尋，所以我們就再用一次 <a class="reference external" href="http://soliton.vm.bytemark.co.uk/pub/cpt-city">cpt-city</a> 的 <code class="docutils literal notranslate"><span class="pre">mby</span></code> 色階看看。下載好色階表後，放到與腳本相同的資料夾中，然後為 grdimage 加上 <code class="docutils literal notranslate"><span class="pre">-C</span></code> 選項：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># (前略)</span>
<span class="c1"># ==== 主要指令 ====</span>
    <span class="c1"># 底圖</span>
grdimage ETOPO1_Bed_g_gmt4.grd -JB-80.27/8.58/-8/24/6i <span class="se">\</span>
         -R-100/1/-50/34r -P -K Cmby.cpt &gt; central_america.ps
pscoast -R -J -O -K -Dh -Bafg -G<span class="si">${</span><span class="nv">color0</span><span class="si">}</span> &gt;&gt; central_america.ps
    <span class="c1"># 國家上色</span>
<span class="c1"># (後略)</span>
</pre></div>
</div>
<p>這次海的顏色看起來比較「像海」了：</p>
<a class="reference external image-reference" href="_images/pen_and_painting_fig6.png"><img alt="_images/pen_and_painting_fig6_s.png" src="_images/pen_and_painting_fig6_s.png" /></a>
<p>當然這張地圖還是有些小問題，你會發現有些海域被塗上綠色，而非傳統所見的藍色。我們接下來的目標，就是<strong>微調色階檔，讓這些綠色的區域以更淺的藍色代替</strong>。要作到這件事，我們必須先了解色階檔是怎麼指定繪圖顏色的。請用文字編輯器打開 <code class="docutils literal notranslate"><span class="pre">mby.cpt</span></code>，你應該會看到如下的內容</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># mby.cpt by M. Burak YIKILMAZ</span>
<span class="c1">#</span>
<span class="c1"># (original title gmt_color.cpt)</span>
<span class="c1">#</span>
<span class="c1"># COLOR_MODEL = RGB</span>
-8000   <span class="m">0</span>   <span class="m">0</span>   <span class="m">80</span>      -6000   <span class="m">0</span>   <span class="m">30</span>  <span class="m">100</span>
-6000   <span class="m">0</span>   <span class="m">30</span>  <span class="m">100</span>     -4000   <span class="m">0</span>   <span class="m">50</span>  <span class="m">102</span>
-4000   <span class="m">0</span>   <span class="m">50</span>  <span class="m">102</span>     -2500   <span class="m">19</span>  <span class="m">108</span> <span class="m">160</span>
-2500   <span class="m">19</span>  <span class="m">108</span> <span class="m">160</span>     -150    <span class="m">24</span>  <span class="m">140</span> <span class="m">205</span>
-150    <span class="m">24</span>  <span class="m">140</span> <span class="m">205</span>     -50     <span class="m">135</span> <span class="m">206</span> <span class="m">250</span>
-50     <span class="m">135</span> <span class="m">206</span> <span class="m">250</span>     -10     <span class="m">176</span> <span class="m">226</span> <span class="m">255</span>
-10     <span class="m">176</span> <span class="m">226</span> <span class="m">255</span>     <span class="m">0</span>       <span class="m">0</span>   <span class="m">97</span>  <span class="m">71</span>
<span class="m">0</span>       <span class="m">0</span>   <span class="m">97</span>  <span class="m">71</span>      <span class="m">50</span>      <span class="m">16</span>  <span class="m">123</span> <span class="m">48</span>
<span class="m">50</span>      <span class="m">16</span>  <span class="m">123</span> <span class="m">48</span>      <span class="m">500</span>     <span class="m">232</span> <span class="m">214</span> <span class="m">125</span>
<span class="m">500</span>     <span class="m">232</span> <span class="m">214</span> <span class="m">125</span>     <span class="m">1200</span>    <span class="m">163</span> <span class="m">68</span>  <span class="m">0</span>
<span class="m">1200</span>    <span class="m">163</span> <span class="m">68</span>  <span class="m">0</span>       <span class="m">1800</span>    <span class="m">130</span> <span class="m">30</span>  <span class="m">30</span>
<span class="m">1800</span>    <span class="m">130</span> <span class="m">30</span>  <span class="m">30</span>      <span class="m">2800</span>    <span class="m">161</span> <span class="m">161</span> <span class="m">161</span>
<span class="m">2800</span>    <span class="m">161</span> <span class="m">161</span> <span class="m">161</span>     <span class="m">4000</span>    <span class="m">206</span> <span class="m">206</span> <span class="m">206</span>
<span class="m">4000</span>    <span class="m">206</span> <span class="m">206</span> <span class="m">206</span>     <span class="m">5000</span>    <span class="m">255</span> <span class="m">255</span> <span class="m">255</span>
B   -
F   -
N   <span class="m">128</span>     <span class="m">128</span>     <span class="m">128</span>
</pre></div>
</div>
<p>檔案中記載了所有色階檔的設定：</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">COLOR_MODEL</span> <span class="pre">=</span> <span class="pre">RGB</span></code> 定義了在此色階檔的所有顏色數值是以 RGB 數值呈現。</li>
<li>色階表的主要部份由 8 欄資料所構成，第 1 欄和第 5 欄是 z 值的範圍 (在我們的例子中，z 值就是高度值)，第 2-4 欄是對應於第 1 欄的 RGB 值，第 6-8 欄是對應於第 5 欄的 RGB
值。以色階表的第一行為例，它定義了在 <code class="docutils literal notranslate"><span class="pre">z</span> <span class="pre">=</span> <span class="pre">-8000</span></code> 時要使用 <code class="docutils literal notranslate"><span class="pre">0/0/80</span></code> 著色，
<code class="docutils literal notranslate"><span class="pre">z</span> <span class="pre">=</span> <span class="pre">-6000</span></code> 時要使用 <code class="docutils literal notranslate"><span class="pre">0/30/100</span></code> 著色，如果 z 值介於這兩者中間，就用線性內插的方式找到對應於不同 z 值的顏色。也就是說，<code class="docutils literal notranslate"><span class="pre">mby.cpt</span></code> 基本上是<strong>連續的色階</strong>，不同的高度會有不同的顏色，色階表中定義了幾個「<strong>錨點</strong>」，GMT 會根據這些錨點內插出整個色階。</li>
<li><code class="docutils literal notranslate"><span class="pre">B</span></code> 是指當 z 值低於色階表中的最小值時，所呈現的顏色。這裡的 <code class="docutils literal notranslate"><span class="pre">-</span></code> 代表不著色。</li>
<li><code class="docutils literal notranslate"><span class="pre">F</span></code> 是指當 z 值高於色階表中的最大值時，所呈現的顏色。這裡的 <code class="docutils literal notranslate"><span class="pre">-</span></code> 代表不著色。</li>
<li><code class="docutils literal notranslate"><span class="pre">N</span></code> 是指當 z 值為 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 時，所呈現的顏色。這裡使用的是灰色。</li>
</ul>
<p>最簡單的修改方式，就是利用文字編輯器把偏綠的顏色改成偏藍的顏色。從色階表中看起來，問題是出在
<code class="docutils literal notranslate"><span class="pre">z</span> <span class="pre">=</span> <span class="pre">-10</span> <span class="pre">到</span> <span class="pre">0</span></code> 之間，因為 <code class="docutils literal notranslate"><span class="pre">z</span> <span class="pre">=</span> <span class="pre">0</span></code> 時的顏色是 <code class="docutils literal notranslate"><span class="pre">0/97/71</span></code>。你可以把它改成任一個偏藍的顏色，存檔後再用上述指令畫畫看，應該就能得到不錯的結果。</p>
<p>不過在這裡，我們要介紹一個更好用的指令 - <code class="docutils literal notranslate"><span class="pre">makecpt</span></code>，它可以幫你創造或線性調整色階檔。它的基本語法為</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>makecpt -C色階名稱或色階檔 <span class="o">[</span>-T最小值/最大值/錨點間距<span class="o">]</span> <span class="o">[</span>-Z<span class="o">]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">-C</span></code> 選項用於輸入參考色階，可以是某個已存在的檔名如 <code class="docutils literal notranslate"><span class="pre">mby.cpt</span></code>，或是 GMT 預先定義好的色階名稱。在 GMT 5 中總共有 36 個預先定義好的色階，可以直接輸入</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ makecpt
</pre></div>
</div>
<p>然後在 <code class="docutils literal notranslate"><span class="pre">-C</span></code> 的說明中就可以看到這些色階的名字。我們先來試試看其中一個叫 <code class="docutils literal notranslate"><span class="pre">ocean</span></code> 的色階看看：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ makecpt -Cocean
-8000       <span class="m">0</span>/2.5/12.5              -7000   <span class="m">0</span>/2.5/12.5
-7000       <span class="m">0</span>/7.5/37.5              -6000   <span class="m">0</span>/7.5/37.5
-6000       <span class="m">0</span>/45/87.5               -5000   <span class="m">0</span>/45/87.5
-5000       <span class="m">0</span>/115/162.5             -4000   <span class="m">0</span>/115/162.5
-4000       <span class="m">43</span>/173.5/192            -3000   <span class="m">43</span>/173.5/192
-3000       <span class="m">129</span>/221/176             -2000   <span class="m">129</span>/221/176
-2000       <span class="m">191</span>.5/247.5/189.5       -1000   <span class="m">191</span>.5/247.5/189.5
-1000       <span class="m">230</span>.5/252.5/233         <span class="m">0</span>       <span class="m">230</span>.5/252.5/233
B   black
F   white
N   <span class="m">127</span>.5
</pre></div>
</div>
<p>輸入完指令後，螢幕上就會顯示這個色階表的初始設定。你會發現這個色階表只有 4 欄，這是因為它把 RGB 值併做一個欄位了。另外，第 2 欄與第 4 欄的顏色值一模一樣，意味著在某個 z 值區段中，
會使用相同的顏色，這種色階稱為<strong>離散的色階</strong>，例如這個色階表，只會使用 8 種顏色幫海域上色。如果要調整 z 值區間，要使用 <code class="docutils literal notranslate"><span class="pre">-T</span></code> 選項，其中的<code class="docutils literal notranslate"><span class="pre">錨點間距</span></code>意味著程式每隔多少 z 值就會內插一個錨點並把顏色記載在色階檔中。而加上 <code class="docutils literal notranslate"><span class="pre">-Z</span></code> 選項的話，就可以把離散的色階變成連續的色階。例如以下指令：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ makecpt -Cocean -T-1000/0/250 -Z
-1000       black           -750    <span class="m">0</span>/10/50
-750        <span class="m">0</span>/10/50         -500    <span class="m">0</span>/150/200
-500        <span class="m">0</span>/150/200       -250    <span class="m">172</span>/245/168
-250        <span class="m">172</span>/245/168     <span class="m">0</span>       <span class="m">250</span>/255/255
B   black
F   white
N   <span class="m">127</span>.5
</pre></div>
</div>
<p>如此一來色階的 z 值會重新定義在 -1000 到 0 這個區間，並且每隔 250 才取一個錨點。加上 <code class="docutils literal notranslate"><span class="pre">-Z</span></code> 之後，第 2 欄與第 4 欄的顏色值會不一樣；精確的來說，第 4 欄的顏色值會跟下一行的第 2 欄的顏色值一模一樣，這樣畫出來才會有連續的效果。如果你要把它儲存為新的色階檔，只要利用重導向指令即可：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ makecpt -Cocean -T-1000/0/250 -Z &gt; ocean_new.cpt
</pre></div>
</div>
<div class="admonition attention">
<p class="first admonition-title">注意</p>
<p>如果你下的是這個指令，然後看到了以下錯誤</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ makecpt -Cocean -T-1000/0/250 -Z &gt; ocean.cpt
makecpt: Error: CPT file ocean.cpt has no z-slices!
<span class="o">[</span>Session makecpt <span class="o">(</span><span class="m">0</span><span class="o">)]</span>: Error returned from GMT API: GMT_CPT_READ_ERROR <span class="o">(</span><span class="m">8</span><span class="o">)</span>
</pre></div>
</div>
<p class="last">那是因為你使用了同名的輸出。<code class="docutils literal notranslate"><span class="pre">makecpt</span></code> 的 <code class="docutils literal notranslate"><span class="pre">-C</span></code> 選項實際上會忽略副檔名，也就是說 <code class="docutils literal notranslate"><span class="pre">-Cocean</span></code> 與 <code class="docutils literal notranslate"><span class="pre">-Cocean.cpt</span></code> 是相同的，在這個指令中，你是從新建的 <code class="docutils literal notranslate"><span class="pre">ocean.cpt</span></code>
讀取數據，而不是從 GMT 內建的 <code class="docutils literal notranslate"><span class="pre">ocean</span></code> 色階讀取。如要避免這種情況，請先把在資料夾中的
<code class="docutils literal notranslate"><span class="pre">ocean.cpt</span></code> 刪掉，然後<strong>避免使用與 GMT 內建色階名稱同名的色階檔</strong>即可。</p>
</div>
<p>在本例中，我們要修改的是 <code class="docutils literal notranslate"><span class="pre">mby.cpt</span></code>，想讓 <code class="docutils literal notranslate"><span class="pre">z</span> <span class="pre">=</span> <span class="pre">0</span></code> 時會顯示的綠色消失，有一個作法是把它改成離散的色階檔，如下所示：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># (前略)</span>
<span class="c1"># ==== 主要指令 ====</span>
    <span class="c1"># 底圖</span>
makecpt -Cmby.cpt &gt; ocean_new.cpt
grdimage ETOPO1_Bed_g_gmt4.grd -JB-80.27/8.58/-8/24/6i <span class="se">\</span>
         -R-100/1/-50/34r -P -K Cocean_new.cpt &gt; central_america.ps
<span class="c1"># (後略)</span>
</pre></div>
</div>
<p>輸出會如下所示，請把它跟前一張圖比較看看：</p>
<img alt="_images/pen_and_painting_fig7.png" src="_images/pen_and_painting_fig7.png" />
<p>明顯的改變是，海床的部份變成了分層設色圖，不同顏色的邊界構成了數條橫亙海中的等高線。另外不那麼明顯的改變是，綠色的地方雖然沒有變成藍色，但是著色變淺了。這是因為在新的色階圖中，
<code class="docutils literal notranslate"><span class="pre">z</span> <span class="pre">=</span> <span class="pre">-10</span></code> 到 <code class="docutils literal notranslate"><span class="pre">0</span></code> 的著色，使用的是原本連續色階檔中 <code class="docutils literal notranslate"><span class="pre">z</span> <span class="pre">=</span> <span class="pre">-5</span></code> 的內插顏色值，所以還是有一點點綠色的成份。</p>
<p>看來我們還得再做些修改才行。由於 <code class="docutils literal notranslate"><span class="pre">makecpt</span></code> 是<strong>線性的調整色階檔</strong>，所以我們還有一招：調整原本色階檔的 z 值範圍。原本的色階檔 z 值定義在 <code class="docutils literal notranslate"><span class="pre">-8000</span></code> 到 <code class="docutils literal notranslate"><span class="pre">5000</span></code>，如果我們把它改成
<code class="docutils literal notranslate"><span class="pre">-8000</span></code> 到 <code class="docutils literal notranslate"><span class="pre">5100</span></code>，那麼原本 <code class="docutils literal notranslate"><span class="pre">z</span> <span class="pre">=</span> <span class="pre">0</span></code> 時的顏色，就會依比例調整到 <code class="docutils literal notranslate"><span class="pre">z</span> <span class="pre">=</span> <span class="pre">61.5</span></code>
左右時的顏色。來試試看吧：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># (前略)</span>
<span class="c1"># ==== 主要指令 ====</span>
    <span class="c1"># 底圖</span>
makecpt -Cmby.cpt -T-8000/5100/1000 -Z &gt; ocean_new.cpt
grdimage ETOPO1_Bed_g_gmt4.grd -JB-80.27/8.58/-8/24/6i <span class="se">\</span>
         -R-100/1/-50/34r -P -K Cocean_new.cpt &gt; central_america.ps
<span class="c1"># (後略)</span>
</pre></div>
</div>
<a class="reference external image-reference" href="_images/pen_and_painting_fig8.png"><img alt="_images/pen_and_painting_fig8_s.png" src="_images/pen_and_painting_fig8_s.png" /></a>
<p>畫出來會發現，怎麼綠色的區塊比剛才還多？先別緊張，這是因為我們的 <code class="docutils literal notranslate"><span class="pre">-T</span></code> 選項還沒調整好的緣故。注意 <code class="docutils literal notranslate"><span class="pre">-T</span></code> 選項中的間距是 <code class="docutils literal notranslate"><span class="pre">1000</span></code>，這表示新的色階檔中，每 <code class="docutils literal notranslate"><span class="pre">1000</span></code> 公尺才會取一個錨點。由於錨點取太少的緣故，導致在 <code class="docutils literal notranslate"><span class="pre">z</span> <span class="pre">=</span> <span class="pre">-1000</span></code> 公尺左右的顏色，就會開始往 <code class="docutils literal notranslate"><span class="pre">z</span> <span class="pre">=</span> <span class="pre">0</span></code> 左右的綠色漸變。如果想要避免這種現象，只要把錨點取得密一點就行了。在完成版的指令稿中，我們使用的間距值是 <code class="docutils literal notranslate"><span class="pre">50</span></code>，這樣就可以有效的避免綠色出現在海洋的著色當中。</p>
</div>
<div class="section" id="id12">
<h2>6.5. 指令稿<a class="headerlink" href="#id12" title="本標題的永久連結">¶</a></h2>
<p>本地圖的最終指令稿如下：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ==== 設定顏色與對應的國家 ====</span>
<span class="c1"># mexico, panama, brazil</span>
<span class="nv">color1</span><span class="o">=</span><span class="s1">&#39;#CD5C5C&#39;</span>
<span class="nv">colorgroup1</span><span class="o">=</span><span class="s1">&#39;MX,BR,PA&#39;</span>
<span class="c1"># guatemala, venezuela, jamaica</span>
<span class="nv">color2</span><span class="o">=</span><span class="s1">&#39;coral&#39;</span>
<span class="nv">colorgroup2</span><span class="o">=</span><span class="s1">&#39;GT,JM,VE&#39;</span>
<span class="c1"># united states, puerto rico, salvador</span>
<span class="nv">color3</span><span class="o">=</span><span class="s1">&#39;240/230/140&#39;</span>
<span class="nv">colorgroup3</span><span class="o">=</span><span class="s1">&#39;US,PR,SV&#39;</span>
<span class="c1"># belize, french guiana, haiti, trinidad and tobago</span>
<span class="nv">color4</span><span class="o">=</span><span class="s1">&#39;0/36/74/4&#39;</span>
<span class="nv">colorgroup4</span><span class="o">=</span><span class="s1">&#39;BZ,GF,HT,TT&#39;</span>
<span class="c1"># honduras, colombia, cuba</span>
<span class="nv">color5</span><span class="o">=</span><span class="s1">&#39;97-0.52-0.94&#39;</span>
<span class="nv">colorgroup5</span><span class="o">=</span><span class="s1">&#39;CO,CU,HN&#39;</span>
<span class="c1"># nicaragua, guyana, bahamas</span>
<span class="nv">color6</span><span class="o">=</span><span class="s1">&#39;250/138/255&#39;</span>
<span class="nv">colorgroup6</span><span class="o">=</span><span class="s1">&#39;BS,GY,NI&#39;</span>
<span class="c1"># costa rica, suriname, dominican</span>
<span class="nv">color7</span><span class="o">=</span><span class="s1">&#39;#8DC740&#39;</span>
<span class="nv">colorgroup7</span><span class="o">=</span><span class="s1">&#39;CR,DO,SR&#39;</span>
<span class="c1"># other countries</span>
<span class="nv">color0</span><span class="o">=</span><span class="s1">&#39;169&#39;</span>

<span class="c1"># ==== 主要指令 ====</span>
    <span class="c1"># 底圖</span>
makecpt -Cmby.cpt -T-8000/5100/50 -Z &gt; ocean_new.cpt
grdimage ETOPO1_Bed_g_gmt4.grd -JB-80.27/8.58/-8/24/6i <span class="se">\</span>
         -R-100/1/-50/34r -P -Cocean_new.cpt -K &gt; central_america.ps
pscoast -R -J -O -K -Dh -Bafg -G<span class="si">${</span><span class="nv">color0</span><span class="si">}</span> &gt;&gt; central_america.ps
    <span class="c1"># 國家上色</span>
pscoast -R -J -O -K -F<span class="si">${</span><span class="nv">colorgroup1</span><span class="si">}</span>+g<span class="si">${</span><span class="nv">color1</span><span class="si">}</span> &gt;&gt; central_america.ps
pscoast -R -J -O -K -F<span class="si">${</span><span class="nv">colorgroup2</span><span class="si">}</span>+g<span class="si">${</span><span class="nv">color2</span><span class="si">}</span> &gt;&gt; central_america.ps
pscoast -R -J -O -K -F<span class="si">${</span><span class="nv">colorgroup3</span><span class="si">}</span>+g<span class="si">${</span><span class="nv">color3</span><span class="si">}</span> &gt;&gt; central_america.ps
pscoast -R -J -O -K -F<span class="si">${</span><span class="nv">colorgroup4</span><span class="si">}</span>+g<span class="si">${</span><span class="nv">color4</span><span class="si">}</span> &gt;&gt; central_america.ps
pscoast -R -J -O -K -F<span class="si">${</span><span class="nv">colorgroup5</span><span class="si">}</span>+g<span class="si">${</span><span class="nv">color5</span><span class="si">}</span> &gt;&gt; central_america.ps
pscoast -R -J -O -K -F<span class="si">${</span><span class="nv">colorgroup6</span><span class="si">}</span>+g<span class="si">${</span><span class="nv">color6</span><span class="si">}</span> &gt;&gt; central_america.ps
pscoast -R -J -O -K -F<span class="si">${</span><span class="nv">colorgroup7</span><span class="si">}</span>+g<span class="si">${</span><span class="nv">color7</span><span class="si">}</span> &gt;&gt; central_america.ps
    <span class="c1"># 國界</span>
pscoast -R -J -O -D -W1/thinner -N1/thinner -Bf &gt;&gt; central_america.ps
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">備註</p>
<p class="last">「繪製國界與海床地形圖：以 <strong>100W - 50W，1N - 34N</strong> 為邊界，Albers 圓錐投影，地圖橫向寬 <strong>6</strong> 吋，直幅繪圖，國家使用 8 種不同的顏色著色，為國界和海岸線加上黑色細線條，海底地形使用 <code class="docutils literal notranslate"><span class="pre">ETOPO1</span> <span class="pre">Bedrock</span></code> 資料，以 <code class="docutils literal notranslate"><span class="pre">ocean_new.cpt</span></code> 為色階上色，這個色階是從 <code class="docutils literal notranslate"><span class="pre">mby.cpt</span></code> 修改而來，目的是把海床的顏色重新分配，使其不包含綠色的色階。邊框使用 GMT 的預設格式與間距。」</p>
</div>
<p>觀看<a class="reference internal" href="#id5">最終版地圖</a></p>
</div>
<div class="section" id="id13">
<h2>6.6. 習題<a class="headerlink" href="#id13" title="本標題的永久連結">¶</a></h2>
<ol class="arabic simple">
<li>仿造此章節的地圖，畫出南海 (<em>South China Sea</em>) 的海底地形與週邊國家圖。座標可使用
<code class="docutils literal notranslate"><span class="pre">95E</span> <span class="pre">至</span> <span class="pre">123E</span></code>，以及 <code class="docutils literal notranslate"><span class="pre">0N</span> <span class="pre">至</span> <span class="pre">26N</span></code>。可使用本章節的顏色或自行調整你愛的搭配。</li>
<li>有沒有辦法把香港與海南島塗上與中國不同的顏色？</li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="scatter_plot.html" class="btn btn-neutral float-right" title="7. XY 點散佈圖" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="coloring_topography.html" class="btn btn-neutral float-left" title="5. 為地形圖上色" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

 <div id="disqus_thread"></div> <script> var disqus_config = function () {this.page.url = 'http://gmt-tutorial.org/pen_and_painting.html'; this.page.identifier = 'pen_and_painting'; }; (function() { var d = document, s = d.createElement('script'); s.src = '//gmt-tutorials.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-19, 鄭懷傑 (Whyjay Zheng)
      <span class="lastupdated">
        最後更新於 11月 30, 2019。
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>
