

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-TW" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-TW" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>10. 版面設計與地圖的幾何布局 &mdash; GMT 教學手冊v1.2</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript" src="_static/translations.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
 <link href='https://fonts.googleapis.com/css?family=Varela Round' rel='stylesheet'>
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/style.css" type="text/css" />
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜尋" href="search.html" />
    <link rel="next" title="11. 暈渲地圖" href="hillshading.html" />
    <link rel="prev" title="9. 繪製向量式資料" href="plot_vector_data.html" /> 
</head>
 <script type="text/javascript">var _jf = _jf || [];_jf.push(['p','39630']);_jf.push(['_setFont','sourcehansans-tc-light','css','.sourcehansans-tc-light']);_jf.push(['_setFont','sourcehansans-tc-light','alias','sourcehansans-tc']);_jf.push(['_setFont','sourcehansans-tc-light','weight',200]);_jf.push(['_setFont','sourcehansans-tc-regular','css','.sourcehansans-tc-regular']);_jf.push(['_setFont','sourcehansans-tc-regular','alias','sourcehansans-tc']);_jf.push(['_setFont','sourcehansans-tc-regular','weight',400]);_jf.push(['_setFont','cwtexqyuan','css','.cwtexqyuan']);_jf.push(['_setFont','cwtexqyuan','alias','cwtexqyuan']);_jf.push(['_setFont','cwtexqyuan','weight',500]);_jf.push(['_setFont','xingothic-tc-w7','css','.xingothic-tc-w7']);_jf.push(['_setFont','xingothic-tc-w7','alias','xingothic-tc']);_jf.push(['_setFont','xingothic-tc-w7','weight',700]);_jf.push(['_setFont','jf-jinxuan-medium','css','.jf-jinxuan-medium']);_jf.push(['_setFont','jf-jinxuan-medium','alias','jf-jinxuan']);_jf.push(['_setFont','jf-jinxuan-medium','weight',600]);(function(f,q,c,h,e,i,r,d){var k=f._jf;if(k.constructor===Object){return}var l,t=q.getElementsByTagName("html")[0],a=function(u){for(var v in k){if(k[v][0]==u){if(false===k[v][1].call(k)){break}}}},j=/\S+/g,o=/[\t\r\n\f]/g,b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,g="".trim,s=g&&!g.call("\uFEFF\xA0")?function(u){return u==null?"":g.call(u)}:function(u){return u==null?"":(u+"").replace(b,"")},m=function(y){var w,z,v,u,x=typeof y==="string"&&y;if(x){w=(y||"").match(j)||[];z=t[c]?(" "+t[c]+" ").replace(o," "):" ";if(z){u=0;while((v=w[u++])){if(z.indexOf(" "+v+" ")<0){z+=v+" "}}t[c]=s(z)}}},p=function(y){var w,z,v,u,x=arguments.length===0||typeof y==="string"&&y;if(x){w=(y||"").match(j)||[];z=t[c]?(" "+t[c]+" ").replace(o," "):"";if(z){u=0;while((v=w[u++])){while(z.indexOf(" "+v+" ")>=0){z=z.replace(" "+v+" "," ")}}t[c]=y?s(z):""}}},n;k.push(["_eventActived",function(){p(h);m(e)}]);k.push(["_eventInactived",function(){p(h);m(i)}]);k.addScript=n=function(u,A,w,C,E,B){E=E||function(){};B=B||function(){};var x=q.createElement("script"),z=q.getElementsByTagName("script")[0],v,y=false,D=function(){x.src="";x.onerror=x.onload=x.onreadystatechange=null;x.parentNode.removeChild(x);x=null;a("_eventInactived");B()};if(C){v=setTimeout(function(){D()},C)}x.type=A||"text/javascript";x.async=w;x.onload=x.onreadystatechange=function(G,F){if(!y&&(!x.readyState||/loaded|complete/.test(x.readyState))){y=true;if(C){clearTimeout(v)}x.src="";x.onerror=x.onload=x.onreadystatechange=null;x.parentNode.removeChild(x);x=null;if(!F){setTimeout(function(){E()},200)}}};x.onerror=function(H,G,F){if(C){clearTimeout(v)}D();return true};x.src=u;z.parentNode.insertBefore(x,z)};a("_eventPreload");m(h);n(r,"text/javascript",false,3000)})(this,this.document,"className","jf-loading","jf-active","jf-inactive","//ds.justfont.com/js/stable/v/5.0.2/id/166657211014");</script>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> GMT 教學手冊
          

          
          </a>

          
            
            
              <div class="version">
                1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
 <div class="langcenter"> <nav class="menu"> <ul class="clearfix"> <li class="current-item"> <a href="#" class="clicker">中文 (台灣) <span class="arrow">&#9660;</span></a> <ul class="sub-menu"> <li><a href="layout_design.html">中文 (台灣)</a></li> <li><a href="en/layout_design.html">English</a></li> </ul> </li> </ul> </nav> </div>
 </div>
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro_install.html">1. GMT 簡介與安裝</a></li>
<li class="toctree-l1"><a class="reference internal" href="software.html">2. 推薦搭配的軟體或套件</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_concept.html">3. 基本概念與名詞</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_first_map.html">4. 製作第一張地圖</a></li>
<li class="toctree-l1"><a class="reference internal" href="coloring_topography.html">5. 為地形圖上色</a></li>
<li class="toctree-l1"><a class="reference internal" href="pen_and_painting.html">6. 畫筆與調色技巧</a></li>
<li class="toctree-l1"><a class="reference internal" href="scatter_plot.html">7. XY 點散佈圖</a></li>
<li class="toctree-l1"><a class="reference internal" href="cpt_colormap.html">8. 使用色階表為網格資料著色</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot_vector_data.html">9. 繪製向量式資料</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">10. 版面設計與地圖的幾何布局</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id2">10.1. 目標</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id6">10.2. 使用的指令與概念</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id7">10.3. 前置作業</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id8">10.4. 操作流程</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id12">10.5. 指令稿</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id13">10.6. 習題</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="hillshading.html">11. 暈渲地圖</a></li>
<li class="toctree-l1"><a class="reference internal" href="contour_and_profile.html">12. 等高線地圖及地形剖面</a></li>
<li class="toctree-l1"><a class="reference internal" href="map_elements.html">13. 加入地圖元素</a></li>
<li class="toctree-l1"><a class="reference internal" href="editing_cpt_colorbar.html">14. 色階檔的編修與呈現</a></li>
<li class="toctree-l1"><a class="reference internal" href="view3d.html">15. 3D 視圖</a></li>
<li class="toctree-l1"><a class="reference internal" href="focal_mech.html">16. 繪製震源機制解</a></li>
<li class="toctree-l1"><a class="reference internal" href="draping.html">17. 在 3D 地形上覆蓋地圖</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_calculator.html">18. 網格計算機</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_img_processing.html">19. 基本影像處理</a></li>
<li class="toctree-l1"><a class="reference internal" href="stat_histogram.html">20. 輸出統計資訊與直方圖</a></li>
<li class="toctree-l1"><a class="reference internal" href="regression_basics.html">21. 進行迴歸分析</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_credit.html">22. 資料來源與參考文獻</a></li>
<li class="toctree-l1"><a class="reference internal" href="command_index.html">23. 指令索引</a></li>
<li class="toctree-l1"><a class="reference internal" href="gallery.html">24. 章節地圖索引</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GMT 教學手冊</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>10. 版面設計與地圖的幾何布局</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
 <a href="https://github.com/whyjz/GMT-tutorials"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/e7bbb0521b397edbd5fe43e7f760759336b5e05f/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"></a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>10. 版面設計與地圖的幾何布局<a class="headerlink" href="#id1" title="本標題的永久連結">¶</a></h1>
<p>接下來讓我們來探討一下 GMT 的版面設計功能。在一般的情形下，GMT 會使用許多預設選項，讓使用者不需做太多設定，甚至是下達簡單的一行指令，就能產生想要的地圖。如果我們想設計比較複雜的配置，例如版面分割、邊框樣式調整、字型與字體樣式，就需要調整 GMT 的「使用者組態設定」。另外，我們也會在這裡介紹地理空間資料常用的兩大類座標：平面與球面，以及 GMT 如何處理這兩種座標混用時的情況。</p>
<div class="section" id="id2">
<h2>10.1. 目標<a class="headerlink" href="#id2" title="本標題的永久連結">¶</a></h2>
<p>繪製從蒙古國<em>烏蘭巴托</em> (Ulaanbaatar) 到美國<em>西雅圖</em> (Seattle) 的<a class="reference external" href="https://en.wikipedia.org/wiki/Great-circle_distance">大圓路徑</a>
(<strong>Great Circle</strong> Route) 與<a class="reference external" href="https://en.wikipedia.org/wiki/Rhumb_line">恆向線</a>
(<strong>Rhumb Line</strong>)。大圓路徑指的是沿著大圓 (半徑為地球半徑的的圓) 前進的路徑，恆向線則是對於所有的子午線，交角皆相等的路線。本章地圖使用了兩個不同的投影方法，上圖為「蘭伯特等積方位投影」 (<strong>Lambert</strong> azimuthal equal-area projection) ，下圖為「麥卡托投影」(<strong>Mercator</strong> Projection)。圖中說明了幾個特點：</p>
<ul class="simple">
<li>恆向線在麥卡托投影中會以直線呈現，而大圓路徑在相同的圖中則是曲線。有趣的是，大圓路徑才是兩地之間實際較短的路徑。</li>
<li>連接到蘭伯特等積方位投影中心點 (本例中為烏蘭巴托) 的大圓路徑會是直線，恆向線則變成曲線。這是比較能直觀連結它們的實際長度的一種方法，也是投影名稱的「方位」二字緣由 (大圓路徑保持在相同方位)。</li>
</ul>
<p>另外，本地圖也替換了 GMT 的預設字型、顏色與版面配置。這些細節將會在以下部份一一解說。</p>
<img alt="_images/ulaanbaatar_seattle.png" id="id5" src="_images/ulaanbaatar_seattle.png" />
<p>直接觀看<a class="reference internal" href="#id12">指令稿</a></p>
</div>
<div class="section" id="id6">
<h2>10.2. 使用的指令與概念<a class="headerlink" href="#id6" title="本標題的永久連結">¶</a></h2>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">gmtdefaults</span></code> - <strong>查看 GMT 的預設作圖參數</strong></li>
<li><code class="docutils literal notranslate"><span class="pre">gmtset</span></code> - <strong>更改 GMT 的預設作圖參數</strong></li>
<li><code class="docutils literal notranslate"><span class="pre">psxy</span></code> - <strong>在地理座標系統上畫點和線</strong></li>
<li><code class="docutils literal notranslate"><span class="pre">pstext</span></code> - <strong>詳細的設定標記在圖上的文字</strong></li>
<li><code class="docutils literal notranslate"><span class="pre">project</span></code> - <strong>產生路徑座標</strong></li>
<li><code class="docutils literal notranslate"><span class="pre">psbasemap</span></code> - 設定繪圖區、座標軸與邊框</li>
<li><code class="docutils literal notranslate"><span class="pre">pscoast</span></code> - 繪製海岸線與國界</li>
<li>外部指令 <code class="docutils literal notranslate"><span class="pre">rm</span></code> - <strong>刪除檔案</strong> (Windows 為 <code class="docutils literal notranslate"><span class="pre">del</span></code>)</li>
<li>外部指令 <code class="docutils literal notranslate"><span class="pre">echo</span></code> - 把資料輸入到管線命令中</li>
<li>GMT 共用選項：<code class="docutils literal notranslate"><span class="pre">-X</span></code> <code class="docutils literal notranslate"><span class="pre">-Y</span></code> <code class="docutils literal notranslate"><span class="pre">-:</span></code></li>
<li>GMT 的預設參數與 <code class="docutils literal notranslate"><span class="pre">gmt.conf</span></code> 檔案</li>
<li>地理座標的給定方式</li>
<li>地圖版面的設定</li>
<li>文字風格設定</li>
<li>GMT 針對不同投影座標系統的不同處理方式</li>
</ul>
</div>
<div class="section" id="id7">
<h2>10.3. 前置作業<a class="headerlink" href="#id7" title="本標題的永久連結">¶</a></h2>
<p>我們要先取得烏蘭巴托與西雅圖兩地的經緯度座標。從 <em>Wikipedia</em> 的條目頁面中，可以找到「經緯度」的資訊欄位，
點選連結後，可以看到不同座標系統的位置資訊，如下所示 (以烏蘭巴托為例)。</p>
<img alt="_images/layout_design_fig1.png" src="_images/layout_design_fig1.png" />
<p>注意在「<strong>WGS84</strong>」欄位中，有兩種座標的格式。你要使用哪種都可以，GMT 都有支援。另外也請注意這裡的座標是「緯度在前，經度在後」。在下表中，也蒐集了兩地的經緯座標
(十進位制四捨五入至小數點第二位)：</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="38%" />
<col width="44%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">城市</th>
<th class="head">烏蘭巴托</th>
<th class="head">西雅圖</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>經緯度 (度分秒)</td>
<td>47° 55′ 0″ N, 106° 55′ 0″ E</td>
<td>47° 36′ 35″ N, 122° 19′ 59″ W</td>
</tr>
<tr class="row-odd"><td>經緯度 (十進位)</td>
<td>47.92, 106.92</td>
<td>47.61, -122.33</td>
</tr>
</tbody>
</table>
<p>為了方便使用這些資料，我們可以建立一個純文字文件 <code class="docutils literal notranslate"><span class="pre">coord.txt</span></code>，再把兩地的座標資訊複製到文件中存檔，如此一來供 GMT 使用的資料表就建立完成。以下是使用十進位制座標的 <code class="docutils literal notranslate"><span class="pre">coord.txt</span></code> 內容：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">47</span>.92, <span class="m">106</span>.92
<span class="m">47</span>.61, -122.33
</pre></div>
</div>
<p>再次強調，資料中的第一欄現在是緯度 (y 值)，第二欄是經度 (x 值)。這與我們在「<a class="reference internal" href="scatter_plot.html"><span class="doc">XY 點散佈圖</span></a>」一章中所使用的 xy 順序相反，不過只要適當的指定欄位意義，GMT 仍然可以讀取。另外，兩個欄位中間使用了「逗號」分隔，在 GMT 中也是可以接受的。</p>
<p>以下是使用度分秒制座標的 <code class="docutils literal notranslate"><span class="pre">coord.txt</span></code> 內容：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">47</span>:55:0N, <span class="m">106</span>:55:0E
<span class="m">47</span>:36:35N, <span class="m">122</span>:19:59W
</pre></div>
</div>
<p>注意我把所有的度分秒符號都統一成「冒號」，而且座標字串中間的空白都被移除了。這種格式是 GMT 5 建議的標準地理座標 (度分秒) 格式，如果你有一串地理座標資料是以度分秒格式儲存，建議在輸入 GMT 之前，把所有的度分秒符號都改為冒號，如上所示。</p>
<p>你也可以從這裡下載資料檔：<a class="reference download internal" download="" href="_downloads/34281402e8ab5610a36388173c0baabc/coord.txt"><code class="xref download docutils literal notranslate"><span class="pre">coord.txt</span></code></a>，這個版本使用度分秒制座標。</p>
<div class="admonition tip">
<p class="first admonition-title">小訣竅</p>
<p>簡單小結 GMT 對於文字輸入檔與地理座標格式的要求：</p>
<ol class="last arabic simple">
<li>欄位的分隔符號可以是<strong>空白</strong>、<strong>逗號</strong> (<code class="docutils literal notranslate"><span class="pre">.csv</span></code> 檔) 與 <strong>Tab</strong> (<code class="docutils literal notranslate"><span class="pre">.tsv</span></code> 檔) 三者之一，但不能在同一個檔案中使用超過一種的分隔符號來分隔欄位。欄位代表的意義預設是第一欄 x 值、第二欄 y 值，不過可以在下指令時逐一指定。</li>
<li>地理座標可以採用<strong>十進位</strong>或<strong>度分秒</strong>：<ul>
<li>以十進位系統表示時，南緯要表示為負緯度，西經則表示為負經度或是東經 180 度之後持續累加，如經度 243 和 -63 都代表西經 63 度。</li>
<li>以度分秒系統表示時，使用 <code class="docutils literal notranslate"><span class="pre">ddd:mm:ssF</span></code> 的方法，<code class="docutils literal notranslate"><span class="pre">ddd</span></code> 為度，<code class="docutils literal notranslate"><span class="pre">mm</span></code> 為分，<code class="docutils literal notranslate"><span class="pre">ss</span></code> 為秒，<code class="docutils literal notranslate"><span class="pre">F</span></code> 則是 NEWS 四個字母之一。</li>
<li>事實上，GMT 也讀得懂 <code class="docutils literal notranslate"><span class="pre">dd°mm′ss″F</span></code> 的表示方法，因此你如果不把這些符號換成冒號，指令還是可以順利執行，不過個人仍然建議換成冒號，使用比較常見的字元，較能避免一些不必要的麻煩，如不正確的螢幕顯示模式或 GMT 再次改版之後可能帶來的困擾。</li>
</ul>
</li>
</ol>
</div>
</div>
<div class="section" id="id8">
<h2>10.4. 操作流程<a class="headerlink" href="#id8" title="本標題的永久連結">¶</a></h2>
<p>在「<a class="reference internal" href="scatter_plot.html"><span class="doc">XY 點散佈圖</span></a>」一章中，我們已經介紹了如何使用 <code class="docutils literal notranslate"><span class="pre">psxy</span> <span class="pre">-T</span></code> 來設定腳本結尾。這裡我們可以沿用相同的概念，來設定腳本開頭。因此，整個腳本的基礎設計大概會是這樣：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ==== 設定腳本的變數與參數 ====</span>
<span class="nv">out_ps</span><span class="o">=</span><span class="s2">&quot;ulaanbaatar_seattle.ps&quot;</span>
其他設定......

<span class="c1"># ==== 開門 (寫入 PS 檔頭) ====</span>
     <span class="c1"># 因為只寫檔頭，所以 -R 和 -J 的設定並不重要，你可以隨意指定。</span>
psxy -R0/1/0/1 -JX1c -T -K &gt; <span class="nv">$out_ps</span>

<span class="c1"># ==== 繪圖 ====</span>
主要的繪圖指令......

<span class="c1"># ==== 關門 (寫入 EOF) ====</span>
psxy -R -J -O -T &gt;&gt; <span class="nv">$out_ps</span>
</pre></div>
</div>
<p>在前面的章節中，我們會把 <code class="docutils literal notranslate"><span class="pre">-P</span></code> 加入第一個 GMT 指令中，以指定紙張採用直向排版。這裡我們要嘗試使用另一種方式：<strong>調整 GMT 的預設參數</strong>。在終端機中輸入</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ gmtdefaults
</pre></div>
</div>
<p>會看到螢幕中輸出一大串如下的文字：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#</span>
<span class="c1"># GMT 5.2.1 Defaults file</span>
<span class="c1"># vim:sw=8:ts=8:sts=8</span>
<span class="c1"># $Revision: 15178 $</span>
<span class="c1"># $LastChangedDate: 2015-11-06 11:45:03 +0100 (Fri, 06 Nov 2015) $</span>
<span class="c1">#</span>
<span class="c1"># COLOR Parameters</span>
<span class="c1">#</span>
<span class="nv">COLOR_BACKGROUND</span>            <span class="o">=</span> black
<span class="nv">COLOR_FOREGROUND</span>            <span class="o">=</span> white
<span class="nv">COLOR_NAN</span>                   <span class="o">=</span> <span class="m">127</span>.5
<span class="nv">COLOR_MODEL</span>                 <span class="o">=</span> none
..... <span class="c1">#(太多了，以下省略)</span>
</pre></div>
</div>
<p>其中不以 <code class="docutils literal notranslate"><span class="pre">#</span></code> 號開頭的每一行，都是 GMT 在畫圖的時候會使用的預設參數。所有參數的意思，都可以在 <a class="reference external" href="http://gmt.soest.hawaii.edu/doc/5.1.0/gmt.conf.html">GMT 的官方手冊</a>中找到。在這麼多的參數中，應該會有一行如下所示</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">PS_PAGE_ORIENTATION</span>         <span class="o">=</span> landscape
</pre></div>
</div>
<p>這個選項其實就是控制版面的排版方向，它解釋了為什麼不加 <code class="docutils literal notranslate"><span class="pre">-P</span></code> 時，GMT 會使用橫向 (landscape) 排版。我們可以使用兩種方式更改預設的參數：</p>
<ol class="arabic">
<li><p class="first">在下 GMT 指令時，使用 <code class="docutils literal notranslate"><span class="pre">--長參數</span></code> 的語法，參數的名稱就是在這裡出現的大寫字串，例如：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ psxy -R0/1/0/1 -JX1c -T -K --PS_PAGE_ORIENTATION<span class="o">=</span>portrait &gt; <span class="nv">$out_ps</span>
</pre></div>
</div>
<p>在這裡 <code class="docutils literal notranslate"><span class="pre">--PS_PAGE_ORIENTATION=portrait</span></code> 的效果與 <code class="docutils literal notranslate"><span class="pre">-P</span></code> 一樣，指定版面為直向 (portrait)。這種方法並不會影響預設值，<strong>改變的參數只對這個指令有效</strong>，其他指令仍然會使用預設設定。</p>
</li>
<li><p class="first">使用 <code class="docutils literal notranslate"><span class="pre">gmtset</span></code> 設定 <code class="docutils literal notranslate"><span class="pre">PS_PAGE_ORIENTATION</span></code> 的預設值。它的語法如下：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ gmtset 參數名1 參數值1 <span class="o">[</span>參數名2 參數值2 參數名3 參數值3...<span class="o">]</span>
<span class="c1"># ---- 或是 ----</span>
$ gmtset <span class="nv">參數名1</span><span class="o">=</span>參數值1 <span class="o">[</span><span class="nv">參數名2</span><span class="o">=</span>參數值2 <span class="nv">參數名3</span><span class="o">=</span>參數值3...<span class="o">]</span>
</pre></div>
</div>
<p>個人推薦使用第二種語法，因為它與 <code class="docutils literal notranslate"><span class="pre">--長參數</span></code> 的語法格式一致。如使用這種方法，以上的例子可改為</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ gmtset <span class="nv">PS_PAGE_ORIENTATION</span><span class="o">=</span>portrait
$ psxy -R0/1/0/1 -JX1c -T -K &gt; <span class="nv">$out_ps</span>
</pre></div>
</div>
<p>這種方法與前一種方法的主要差異是，GMT 會紀錄改變的預設值，只要紀錄不被覆蓋或刪除，<strong>改變的參數對接下來的所有指令都有效</strong>。</p>
</li>
</ol>
<p>由於第一種方法已經在<a class="reference external" href="editing_cpt_colorbar.html">之前的篇章</a>介紹過了，因此這裡讓我們進一步看看第二種方法的細節。<code class="docutils literal notranslate"><span class="pre">gmtset</span></code> 指令會把所有的設定值存到當前目錄下的 <code class="docutils literal notranslate"><span class="pre">gmt.conf</span></code> 檔案，如果你之前並沒有下過任何 <code class="docutils literal notranslate"><span class="pre">gmtset</span></code> 指令，在第一次下達指令完畢後，應該也會看到 <code class="docutils literal notranslate"><span class="pre">gmt.conf</span></code> 出現在當前資料夾中。<code class="docutils literal notranslate"><span class="pre">gmt.conf</span></code> 的內容與 <code class="docutils literal notranslate"><span class="pre">gmtdefaults</span></code> 的輸出相同，事實上當 <code class="docutils literal notranslate"><span class="pre">gmt.conf</span></code> 存在於資料夾中時，<code class="docutils literal notranslate"><span class="pre">gmtdefaults</span></code> 就只是把它的內容印在螢幕上的指令。 因此，如果要修改 GMT 的預設設定，我們還有一種方法：</p>
<ol class="arabic simple" start="3">
<li>直接修改資料夾中的 <code class="docutils literal notranslate"><span class="pre">gmt.conf</span></code> 檔案。如果你想要測試不同參數的效果或是頻繁的更改參數，這種方法會比 gmtset 還要快一點。如果你想使用之前建立但放在別的資料夾的 <code class="docutils literal notranslate"><span class="pre">gmt.conf</span></code> 設定，只要把它複製到當前的資料夾即可。</li>
</ol>
<div class="admonition tip">
<p class="first admonition-title">小訣竅</p>
<p>資料夾中沒有 <code class="docutils literal notranslate"><span class="pre">gmt.conf</span></code> 時，<code class="docutils literal notranslate"><span class="pre">gmtdefaults</span></code> 和其他 GMT 選項讀取的設定檔位於
<code class="docutils literal notranslate"><span class="pre">GMT根目錄/share/conf/gmt.conf</span></code>。你當然也可以修改此檔案，但建議修改之前先留個備份，萬一改錯的話，至少你還可以使用備份檔還原 GMT 安裝時的「初始設定」。</p>
<p class="last">另外，如果你的資料夾中已經有了上一次繪圖時產生的 <code class="docutils literal notranslate"><span class="pre">gmt.conf</span></code>，而你又不想讓上一次的設定選項「干擾」到你這一次要畫的地圖，則你可以簡單的把 <code class="docutils literal notranslate"><span class="pre">gmt.conf</span></code> 刪掉，這樣 GMT 會重新使用<code class="docutils literal notranslate"><span class="pre">GMT根目錄/share/conf/gmt.conf</span></code> 的預設值，然後就可以從頭使用 <code class="docutils literal notranslate"><span class="pre">gmtset</span></code> 來設定新的繪圖參數。</p>
</div>
<p>介紹完 <code class="docutils literal notranslate"><span class="pre">gmtset</span></code> 後，讓我們實際在本例中做個測試。先畫出目標地圖的下半部 (麥卡托投影的部份)：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ==== 設定變數 ====</span>
<span class="nv">out_ps</span><span class="o">=</span><span class="s2">&quot;ulaanbaatar_seattle.ps&quot;</span>
<span class="nv">land_color</span><span class="o">=</span><span class="s2">&quot;#CEB9A0&quot;</span>

<span class="c1"># ==== 調整 GMT 預設參數 ====</span>
gmtset <span class="nv">PS_PAGE_ORIENTATION</span><span class="o">=</span>portrait

<span class="c1"># ==== 開門 (寫入 PS 檔頭) ====</span>
psxy -R0/1/0/1 -JX1c -T -K &gt; <span class="nv">$out_ps</span>

<span class="c1"># ==== 繪圖 ====</span>
psbasemap -R70/270/30S/70N -JM13c -O -K -B+tMercator &gt;&gt; <span class="nv">$out_ps</span>
pscoast -R -J -O -K -Dl -A1000 -G<span class="nv">$land_color</span> -N1/thick,60 -Ba40f20g20 &gt;&gt; <span class="nv">$out_ps</span>

<span class="c1"># ==== 關門 (寫入 EOF) ====</span>
psxy -R -J -O -T &gt;&gt; <span class="nv">$out_ps</span>
</pre></div>
</div>
<p>出圖如下所示，左側的部份是地圖在整張 A4 紙中的位置，紅色外框即是紙的範圍。</p>
<img alt="_images/layout_design_fig2.png" src="_images/layout_design_fig2.png" />
<p>為了讓它變好看一點，我們還要修改以下預設指令：</p>
<ul class="simple">
<li>FONT_TITLE: 標題字型。在 GMT 中，<strong>字型與畫筆類似，由三個部份組成</strong>：<code class="docutils literal notranslate"><span class="pre">尺寸,字型,顏色</span></code>。「尺寸」可為任意數值，預設單位為點 (points)；「樣式」則可參考
<a class="reference external" href="http://gmt.soest.hawaii.edu/doc/5.1.0/GMT_Docs.html#g-postscript-fonts-used-by-gmt">PostScript 的字型樣式表</a>，可以使用字型的代號或是字型的名稱來表示。「顏色」則是 GMT 通用的顏色格式。我們想要的設定是
<code class="docutils literal notranslate"><span class="pre">30,Bookman-Demi,#0D057A</span></code> (30 點字的 Bookman-Demi，顏色是 #0D057A)。</li>
<li>FONT_ANNOT_PRIMARY：座標軸主格點標示的字型，使用 <code class="docutils literal notranslate"><span class="pre">12p,20,#0D057A</span></code> (12點字的 Bookman-LightItalic，顏色與標題一樣)。</li>
<li>FORMAT_GEO_MAP：(地理作圖的)座標刻度標示的格式，使用英文代號的搭配組合表示，<code class="docutils literal notranslate"><span class="pre">d</span></code> 代表度，<code class="docutils literal notranslate"><span class="pre">m</span></code> 代表分，<code class="docutils literal notranslate"><span class="pre">s</span></code> 代表秒，<code class="docutils literal notranslate"><span class="pre">F</span></code> 代表數值後面會加的「NEWS」後綴符號，詳細設定可<a class="reference external" href="http://gmt.soest.hawaii.edu/doc/5.1.0/gmt.conf.html">在此查閱</a>。我們要使用的是 <code class="docutils literal notranslate"><span class="pre">dddF</span></code>，如此一來可令所有座標只以至多三位數的度來表示，並搭配後綴符號。</li>
<li>MAP_FRAME_TYPE：地圖邊框樣式。預設是 <code class="docutils literal notranslate"><span class="pre">fancy</span></code>，就是上圖的黑白相間邊框。改成 <code class="docutils literal notranslate"><span class="pre">plain</span></code> 的話，邊框會變成最基本的樣式。</li>
<li>MAP_GRID_CROSS_SIZE_PRIMARY：地圖格線的十字交叉符號大小。使用 <code class="docutils literal notranslate"><span class="pre">8p</span></code>。</li>
<li>MAP_GRID_PEN_PRIMARY：地圖格線的畫筆屬性。使用 <code class="docutils literal notranslate"><span class="pre">thinner,#ED99F0</span></code>。</li>
<li>MAP_TICK_PEN_PRIMARY：地圖座標刻度的畫筆屬性。使用 <code class="docutils literal notranslate"><span class="pre">thicker,black</span></code>。</li>
<li>MAP_TITLE_OFFSET：地圖標題與座標軸刻度的垂直距離。使用 <code class="docutils literal notranslate"><span class="pre">0.5c</span></code>。</li>
<li>MAP_ORIGIN_X：地圖邊框左下角 (<strong>地圖基準</strong>) 距離紙張左下角的水平距離，預設值是 <code class="docutils literal notranslate"><span class="pre">1i</span></code>，這裡我們來試試看改成 <code class="docutils literal notranslate"><span class="pre">0</span></code>。</li>
<li>MAP_ANNOT_OBLIQUE：座標軸刻度的「擺放模式」。在上圖中，經度和緯度的刻度都是水平顯示的，我們要使用的設定代號是 <code class="docutils literal notranslate"><span class="pre">32</span></code>，意謂著「經度保持原樣，緯度與地圖的邊框平行顯示」。</li>
<li>PS_CHAR_ENCODING：PostScript 特殊符號的編碼集，請參閱「<a class="reference internal" href="scatter_plot.html"><span class="doc">XY 點散佈圖</span></a>」。使用 <code class="docutils literal notranslate"><span class="pre">ISOLatin1+</span></code>。</li>
<li>PS_PAGE_COLOR：紙張的底色。使用 <code class="docutils literal notranslate"><span class="pre">ivory</span></code> (象牙色)。</li>
</ul>
<p>因此，在原腳本中 <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">====</span> <span class="pre">調整</span> <span class="pre">GMT</span> <span class="pre">預設參數</span> <span class="pre">====</span></code> 的一節，可以擴展成：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># (前略)</span>
<span class="c1"># ==== 調整 GMT 預設參數 ====</span>
gmtset <span class="nv">FONT_TITLE</span><span class="o">=</span><span class="m">30</span>,Bookman-Demi,#0D057A <span class="se">\</span>
       <span class="nv">FONT_ANNOT_PRIMARY</span><span class="o">=</span>12p,20,#0D057A <span class="se">\</span>
       <span class="nv">FORMAT_GEO_MAP</span><span class="o">=</span>dddF <span class="se">\</span>
       <span class="nv">MAP_FRAME_TYPE</span><span class="o">=</span>plain <span class="se">\</span>
       <span class="nv">MAP_GRID_CROSS_SIZE_PRIMARY</span><span class="o">=</span>8p <span class="se">\</span>
       <span class="nv">MAP_GRID_PEN_PRIMARY</span><span class="o">=</span>thinner,#ED99F0 <span class="se">\</span>
       <span class="nv">MAP_TICK_PEN_PRIMARY</span><span class="o">=</span>thicker,black <span class="se">\</span>
       <span class="nv">MAP_TITLE_OFFSET</span><span class="o">=</span><span class="m">0</span>.5c <span class="se">\</span>
       <span class="nv">MAP_ORIGIN_X</span><span class="o">=</span><span class="m">0</span> <span class="se">\</span>
       <span class="nv">MAP_ANNOT_OBLIQUE</span><span class="o">=</span><span class="m">32</span> <span class="se">\</span>
       <span class="nv">PS_CHAR_ENCODING</span><span class="o">=</span>ISOLatin1+ <span class="se">\</span>
       <span class="nv">PS_PAGE_ORIENTATION</span><span class="o">=</span>portrait <span class="se">\</span>
       <span class="nv">PS_PAGE_COLOR</span><span class="o">=</span>ivory
<span class="c1"># (後略)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">備註</p>
<p class="last">有許多參數名稱都有 <code class="docutils literal notranslate"><span class="pre">PRIMARY</span></code>，這是由於 GMT 的某些邊框 (尤其是 <code class="docutils literal notranslate"><span class="pre">fancy</span></code> 類型的邊框) 會使用不同的設定來指定主格線 (刻度)
與副格線 (刻度)。在我們的例子中，只設定了主格線 (刻度)，副格線皆已省略。你也可以換成 <code class="docutils literal notranslate"><span class="pre">fancy</span></code> 類型的邊框，指定副格線的樣式
(帶有 <code class="docutils literal notranslate"><span class="pre">SECONDARY</span></code> 的參數名稱)，看看出圖會是什麼樣的感覺！詳細的解說與參數影響的具體內容，也可參閱
<a class="reference external" href="http://gmt.soest.hawaii.edu/doc/5.1.0/GMT_Docs.html#gmt-defaults">GMT 官方說明手冊</a>。</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">小訣竅</p>
<p class="last">如要使用不是 GMT 預先定義的 PostScript 字型，作法請參閱<strong>之後的章節</strong>。</p>
</div>
<p>以上腳本出圖如下：</p>
<img alt="_images/layout_design_fig3.png" src="_images/layout_design_fig3.png" />
<p>大部分的改動都如我們所預期：所有的字體樣式都換了、地圖邊框改了、顏色和格線也換成比較舒服的搭配。值得一提的是，由於
<code class="docutils literal notranslate"><span class="pre">MAP_ORIGIN_X=0</span></code> 的關係，地圖的左側邊框緊貼著紙張的左緣，這顯然不是我們想要的狀況。要解決這個問題，除了把
<code class="docutils literal notranslate"><span class="pre">MAP_ORIGIN_X</span></code> 設成大一點的數值之外，GMT 也提供了一個通用選項 <code class="docutils literal notranslate"><span class="pre">-X</span></code> 來設定地圖在紙張上的水平位置，它的用法為</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-X與地圖左緣或與上一張地圖定位點的距離
</pre></div>
</div>
<p>在我們的例子中，看起來最協調的設計是地圖擺在紙張正中間的位置。由於 A4 的短邊長度是 21 公分，我們的地圖寬是 13 公分，因此 <code class="docutils literal notranslate"><span class="pre">-X4c</span></code> 可以讓地圖左側空上 4 公分的距離，正好讓地圖置中於紙張。因此，加上 <code class="docutils literal notranslate"><span class="pre">-X</span></code> 選項後的腳本為</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># (前略)</span>
<span class="c1"># ==== 繪圖 ====</span>
psbasemap -R70/270/30S/70N -JM13c -O -K -X4c -B+tMercator &gt;&gt; <span class="nv">$out_ps</span>    <span class="c1"># 調整水平位置</span>
pscoast -R -J -O -K -Dl -A1000 -G<span class="nv">$land_color</span> -N1/thick,60 -Ba40f20g20 <span class="se">\</span>
        --MAP_GRID_PEN_PRIMARY<span class="o">=</span>thicker &gt;&gt; <span class="nv">$out_ps</span>    <span class="c1"># 這可以讓我們的十字符號粗一點</span>
<span class="c1"># (後略)</span>
</pre></div>
</div>
<p>在以上指令中，<code class="docutils literal notranslate"><span class="pre">-X</span></code> 加在 <code class="docutils literal notranslate"><span class="pre">psbasemap</span></code> 內，永久改變了地圖在紙張上呈現的位置。如果我們在之後的指令中再次加上
<code class="docutils literal notranslate"><span class="pre">-X</span></code>，移動的距離就是<strong>從目前的地圖位置起算，而不是紙張左緣</strong>。因此，我們不必也不能在 <code class="docutils literal notranslate"><span class="pre">pscoast</span></code> 中加上 <code class="docutils literal notranslate"><span class="pre">-X</span></code>，不然兩個圖層就會無法疊在同一個位置。</p>
<p>接下來讓我們補完這張地圖上的城市位置和兩條不同的路徑。由於在 <code class="docutils literal notranslate"><span class="pre">coord.txt</span></code> 中，座標欄位是「先緯度再經度」，因此在使用
<code class="docutils literal notranslate"><span class="pre">psxy</span></code> 時，需要加上 <code class="docutils literal notranslate"><span class="pre">-:</span></code> 選項，「告訴」GMT 第一欄是 Y 值，第二欄是 X 值。<code class="docutils literal notranslate"><span class="pre">psxy</span></code> 在地圖上畫線時的預設模式是「畫出大圓路徑」，如果加上 <code class="docutils literal notranslate"><span class="pre">-A</span></code> 選項，可以改成「畫出投影系統中的直線路徑」，在麥卡托投影中，這條路徑就是恆向線。因此，運用 <code class="docutils literal notranslate"><span class="pre">psxy</span></code> 與 <code class="docutils literal notranslate"><span class="pre">pstext</span></code>，就可以畫出以上目標，並且標注兩條路徑的名稱：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ==== 設定變數 ====</span>
<span class="nv">out_ps</span><span class="o">=</span><span class="s2">&quot;ulaanbaatar_seattle.ps&quot;</span>
<span class="nv">input_xy</span><span class="o">=</span><span class="s2">&quot;coord.txt&quot;</span>
<span class="nv">xy_ulaanbaatar</span><span class="o">=</span><span class="s2">&quot;47:55:0N, 106:55:0E&quot;</span>       <span class="c1"># 烏蘭巴托的座標</span>
<span class="nv">xy_seattle</span><span class="o">=</span><span class="s2">&quot;47:36:35N, 122:19:59W&quot;</span>         <span class="c1"># 西雅圖的座標</span>
<span class="nv">land_color</span><span class="o">=</span><span class="s2">&quot;#CEB9A0&quot;</span>                       <span class="c1"># pscoast 的陸域填色</span>
<span class="nv">gcp_color</span><span class="o">=</span><span class="s2">&quot;#0044FF&quot;</span>                        <span class="c1"># 大圓路徑的顏色</span>
<span class="nv">psl_color</span><span class="o">=</span><span class="s2">&quot;#FF0073&quot;</span>                        <span class="c1"># 恆向線的顏色</span>
    <span class="c1"># 把兩個城市的 xy 座標寫入 $input_xy 檔案中。</span>
    <span class="c1"># 如果你已經下載了 coord.txt，以下兩行可以註解掉。</span>
<span class="nb">echo</span> <span class="nv">$xy_ulaanbaatar</span> &gt; <span class="nv">$input_xy</span>
<span class="nb">echo</span> <span class="nv">$xy_seattle</span>    &gt;&gt; <span class="nv">$input_xy</span>

<span class="c1"># ==== 調整 GMT 預設參數 ====</span>
<span class="c1"># (同上，略)</span>
<span class="c1"># ==== 開門 (寫入 PS 檔頭) ====</span>
<span class="c1"># (同上，略)</span>

<span class="c1"># ==== 繪圖 (麥卡托) ====</span>
psbasemap -R70/270/30S/70N -JM13c -O -K -X4c -B+tMercator &gt;&gt; <span class="nv">$out_ps</span>
pscoast -R -J -O -K -Dl -A1000 -G<span class="nv">$land_color</span> -N1/thick,60 -Ba40f20g20 <span class="se">\</span>
        --MAP_GRID_PEN_PRIMARY<span class="o">=</span>thicker &gt;&gt; <span class="nv">$out_ps</span>
psxy <span class="nv">$input_xy</span> -R -J -O -K -: -A -W1p,<span class="nv">$psl_color</span> &gt;&gt; <span class="nv">$out_ps</span>    <span class="c1"># 恆向線</span>
psxy <span class="nv">$input_xy</span> -R -J -O -K -:    -W1p,<span class="nv">$gcp_color</span> &gt;&gt; <span class="nv">$out_ps</span>    <span class="c1"># 大圓路徑</span>
psxy <span class="nv">$input_xy</span> -R -J -O -K -:    -Sa0.4c -Gblack &gt;&gt; <span class="nv">$out_ps</span>    <span class="c1"># 城市的位置，-Sa0.4c 是外接圓為 0.4 公分的星形符號。</span>
    <span class="c1"># 兩條線的說明文字</span>
<span class="nb">echo</span> <span class="s2">&quot;174 41 Projected Straight Line&quot;</span> <span class="p">|</span> pstext -R -J -O -K -F+f,18,<span class="nv">$psl_color</span> &gt;&gt; <span class="nv">$out_ps</span>
<span class="nb">echo</span> <span class="s2">&quot;174 61 Great Circle Path&quot;</span>       <span class="p">|</span> pstext -R -J -O -K -F+f,18,<span class="nv">$gcp_color</span> &gt;&gt; <span class="nv">$out_ps</span>

<span class="c1"># ==== 關門 (寫入 EOF) ====</span>
<span class="c1"># (同上，略)</span>
</pre></div>
</div>
<p>如此一來，目標地圖的下半部就完成了！</p>
<img alt="_images/layout_design_fig4.png" src="_images/layout_design_fig4.png" />
<p>接下來讓我們進入上半部，蘭伯特投影的地圖。為了畫第二個地圖，我們必須把地圖在紙張上呈現的基準位置往上移。前述的 <code class="docutils literal notranslate"><span class="pre">-X</span></code> 只能負責水平方向的基準移動，如果要垂直移動，須使用 <code class="docutils literal notranslate"><span class="pre">-Y</span></code>。由於 <code class="docutils literal notranslate"><span class="pre">MAP_ORIGIN_Y</span></code> 的預設值是 <code class="docutils literal notranslate"><span class="pre">1i</span></code>，因此原本的地圖基準距離地圖的底部已經有 2.54 公分，考量到 A4 紙的長度是 29.7 公分，只要把地圖的基準再上移 12 公分左右，也就是 <code class="docutils literal notranslate"><span class="pre">-Y12c</span></code>，就能讓新的地圖位於 A4 紙的上半部。至於 <code class="docutils literal notranslate"><span class="pre">-X</span></code>，則可以繼續維持原基準，保持水平置中的設定。</p>
<p>蘭伯特等積方位投影限定使用全球的作圖範圍，也就是 <code class="docutils literal notranslate"><span class="pre">-R-180/180/-90/90</span></code>。你也可以使用比較短的特殊代號 <code class="docutils literal notranslate"><span class="pre">-Rg</span></code>，它的效果與前者相同。<code class="docutils literal notranslate"><span class="pre">-J</span></code> 語法則為：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-JA中心點經度/中心點緯度/尺寸
</pre></div>
</div>
<p>讓我們選擇烏蘭巴托的座標當作投影的中心點，畫出地圖、海岸線、大圓路徑與城市位置：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># (前略)</span>
<span class="c1"># ==== 繪圖 (麥卡托) ====</span>
<span class="c1"># (同上，略)</span>

<span class="c1"># ==== 繪圖 (蘭伯特) ====</span>
psbasemap -Rg -JA106:55/47:55/13c -O -K -Y12c -B+tLambert <span class="se">\</span>
        --MAP_TITLE_OFFSET<span class="o">=</span>0c &gt;&gt; <span class="nv">$out_ps</span>      <span class="c1"># 把標題與地圖邊框弄靠近一點</span>
pscoast -R -J -O -K -Dl -A1000 -G<span class="nv">$land_color</span> -N1/thick,60 -Bxg60 -Byg30 <span class="se">\</span>
        --MAP_GRID_CROSS_SIZE_PRIMARY<span class="o">=</span>0p &gt;&gt; <span class="nv">$out_ps</span>      <span class="c1"># 這次我們不要十字符號出現在此地圖中</span>
psxy <span class="nv">$input_xy</span> -R -J -O -K -: -W1p,<span class="nv">$gcp_color</span> &gt;&gt; <span class="nv">$out_ps</span>    <span class="c1"># 大圓路徑</span>
psxy <span class="nv">$input_xy</span> -R -J -O -K -: -Sa0.4c -Gblack &gt;&gt; <span class="nv">$out_ps</span>    <span class="c1"># 城市位置</span>

<span class="c1"># ==== 關門 (寫入 EOF) ====</span>
<span class="c1"># (同上，略)</span>
</pre></div>
</div>
<img alt="_images/layout_design_fig5.png" src="_images/layout_design_fig5.png" />
<p>你會發現在上圖中，地圖是沒有刻度座標的。這是目前 GMT 的一個未修復 bug (？)，某些圓形的地圖投影會無法顯示座標刻度。如果我們要加上刻度座標，得利用 <code class="docutils literal notranslate"><span class="pre">pstext</span></code> 額外標上去，我們可以稍候再處理。另外，烏蘭巴托已經被置於地圖正中間了，這時大圓路徑在地圖上就是一直線前往西雅圖，如果我們把 <code class="docutils literal notranslate"><span class="pre">-A</span></code> 選項打開，也只會得到相同的路徑。那麼，<strong>該如何畫出在這張地圖上的恆向線？</strong></p>
<p>要解決這個問題，得呼叫 GMT 中一個多功能的指令：<code class="docutils literal notranslate"><span class="pre">project</span></code>。這個指令可以用來進行許多關於座標轉換或是在某個特定的座標系統下產生路徑的工作，這裡我們要使用 <code class="docutils literal notranslate"><span class="pre">project</span></code> 最簡單的應用之一，也就是在平面直角座標下產生直線路徑，也就是恆向線
(麥卡托投影中的直線)。它的語法為</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>project -C起點座標 -E終點座標 -G每個取樣點的距離<span class="o">(</span>單位與起終點座標的相同<span class="o">)</span> -N
<span class="c1"># -N: 設定座標系為平面直角座標</span>
</pre></div>
</div>
<p>起點設為 <code class="docutils literal notranslate"><span class="pre">106.92/47.92</span></code> (烏蘭巴托)，終點設為 <code class="docutils literal notranslate"><span class="pre">237.67/47.61</span></code>
(西雅圖，注意這邊的經度要比烏蘭巴托大，因此不能使用負值)，每個取樣點間隔設為 10 度，在終端機中的指令與輸出就像以下所示：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ project -C106.92/47.92 -E237.67/47.61 -G10 -N
<span class="m">106</span>.92      <span class="m">47</span>.92   <span class="m">0</span>
<span class="m">116</span>.919971893       <span class="m">47</span>.8962906976   <span class="m">10</span>
<span class="m">126</span>.919943787       <span class="m">47</span>.8725813952   <span class="m">20</span>
<span class="m">136</span>.91991568        <span class="m">47</span>.8488720928   <span class="m">30</span>
<span class="m">146</span>.919887574       <span class="m">47</span>.8251627905   <span class="m">40</span>
<span class="m">156</span>.919859467       <span class="m">47</span>.8014534881   <span class="m">50</span>
<span class="m">166</span>.91983136        <span class="m">47</span>.7777441857   <span class="m">60</span>
<span class="m">176</span>.919803254       <span class="m">47</span>.7540348833   <span class="m">70</span>
-173.080224853      <span class="m">47</span>.7303255809   <span class="m">80</span>
.... <span class="c1"># (以下略)</span>
</pre></div>
</div>
<p>輸出部份的第一欄與第二欄很明顯是經度與緯度，第三欄則是與起點的距離 (以度為單位)。因此，我們可以簡單的利用管線指令，把 <code class="docutils literal notranslate"><span class="pre">project</span></code> 的輸出傳遞給 <code class="docutils literal notranslate"><span class="pre">psxy</span></code> 使用：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>project -C106.92/47.92 -E237.67/47.61 -G10 -N <span class="p">|</span><span class="se">\</span>
psxy           -R -J -O -K    -W1p,<span class="nv">$psl_color</span> &gt;&gt; <span class="nv">$out_ps</span>    <span class="c1"># 在蘭伯特投影中的恆向線</span>
</pre></div>
</div>
<p>把以上指令加在腳本內 <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">====</span> <span class="pre">繪圖</span> <span class="pre">(蘭伯特)</span> <span class="pre">====</span></code> 的段落中，就可以成功畫出恆向線。</p>
<img alt="_images/layout_design_fig6.png" src="_images/layout_design_fig6.png" />
<p>本地圖的最後一步，就是替兩條線與經緯格線加上文字標籤。換 <code class="docutils literal notranslate"><span class="pre">pstext</span></code> 上場了！這次要標的文字比較複雜，因為每個標籤的角度都不一樣，使用 <code class="docutils literal notranslate"><span class="pre">echo</span></code> 一一指定的話會變得有點麻煩。幸好，<code class="docutils literal notranslate"><span class="pre">pstext</span></code> 和 <code class="docutils literal notranslate"><span class="pre">psxy</span></code> 一樣，都可以利用重導向符號 <code class="docutils literal notranslate"><span class="pre">&lt;&lt;</span></code> 一次輸入以上這些不同資訊。它的具體語法為：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pstext 選項們 -F+欄位a+欄位b+.... &gt;&gt; 輸出檔 <span class="s">&lt;&lt; EOF</span>
<span class="s">第一欄(固定為X) 第二欄(固定為Y) 第三欄(欄位a) 第四欄(欄位b) ... 最後一欄(固定為標籤文字)</span>
<span class="s">...           ...           ...          ...          ... ...</span>
<span class="s">...           ...           ...          ...          ... ...</span>
<span class="s">EOF</span>
</pre></div>
</div>
<p>也就是說，<code class="docutils literal notranslate"><span class="pre">pstext</span></code> 要求輸入最少為 3 欄 (X、Y、標籤文字)，而透過 <code class="docutils literal notranslate"><span class="pre">-F</span></code> 選項，可以指定更多的欄位。如果要加上經緯格線的文字標籤，我們可以使用 <code class="docutils literal notranslate"><span class="pre">-F+a</span></code>，如此一來第 3 欄就會是每個文字的角度 (從水平開始往逆時針旋轉)，標籤文字則會被擠到第 4 欄，如下所示：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pstext -R -J -O -K -F+a   &gt;&gt; <span class="nv">$out_ps</span> <span class="s">&lt;&lt; ANNOTEND</span>
<span class="s">106.92 -30 0   30\260S</span>
<span class="s">106.92 30  0   30\260N</span>
<span class="s">60     15  70  60\260E</span>
<span class="s">180    15  305 180\260</span>
<span class="s">ANNOTEND</span>
<span class="c1"># 經度  緯度  角度  文字</span>
</pre></div>
</div>
<p>如果要加上大圓路徑和恆向線的標籤，我們除了要指定旋轉角度外，也要指定不同的字型。在前一章麥卡托地圖中，指定字型的方式是 <code class="docutils literal notranslate"><span class="pre">-F+f字型樣式</span></code> ，如果不給 <code class="docutils literal notranslate"><span class="pre">字型樣式</span></code> 的話，就代表 <code class="docutils literal notranslate"><span class="pre">pstext</span></code> 必需要在輸入資料中尋找對應的欄位。在本例中，我們可使用 <code class="docutils literal notranslate"><span class="pre">-F+a+f</span></code> 來指定第 3 欄為角度、第 4 欄為字型樣式，而標籤文字這次則被放到了第 5 欄：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pstext -R -J -O -K -F+a+f &gt;&gt; <span class="nv">$out_ps</span> <span class="s">&lt;&lt; LABELEND</span>
<span class="s">180    40  58  ,Bookman-DemiItalic,$psl_color   Rhumb Line</span>
<span class="s">180    80  58  ,Bookman-DemiItalic,$gcp_color   Great Circle Path</span>
<span class="s">LABELEND</span>
<span class="c1"># 經度  緯度  角度  字型樣式  文字</span>
</pre></div>
</div>
<p>把以上兩段指令加在腳本內 <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">====</span> <span class="pre">繪圖</span> <span class="pre">(蘭伯特)</span> <span class="pre">====</span></code> 的段落中，就能加上我們想要的標籤。</p>
<p>恭喜！我們終於完成本章目標的地圖了。最後請記得我們這次使用 <code class="docutils literal notranslate"><span class="pre">gmtset</span></code> 修改的所有選項，都會被存在 <code class="docutils literal notranslate"><span class="pre">gmt.conf</span></code> 中。如果你下次要在同一個資料夾作圖，但是又不想使用這次的設定，那麼在地圖完成後，請自行刪除 <code class="docutils literal notranslate"><span class="pre">gmt.conf</span></code>，或是你也可以把刪除指令放在腳本中的最後一行：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># (前略)</span>
<span class="c1"># ==== 關門 (寫入 EOF) ====</span>
psxy -R -J -O -T &gt;&gt; <span class="nv">$out_ps</span>
rm -rf gmt.conf    <span class="c1"># &lt;---- 消除舊的組態設定檔</span>
</pre></div>
</div>
</div>
<div class="section" id="id12">
<h2>10.5. 指令稿<a class="headerlink" href="#id12" title="本標題的永久連結">¶</a></h2>
<p>本地圖的最終指令稿如下：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ==== 設定變數 ====</span>
<span class="nv">out_ps</span><span class="o">=</span><span class="s2">&quot;ulaanbaatar_seattle.ps&quot;</span>
<span class="nv">input_xy</span><span class="o">=</span><span class="s2">&quot;coord.txt&quot;</span>
<span class="nv">xy_ulaanbaatar</span><span class="o">=</span><span class="s2">&quot;47:55:0N, 106:55:0E&quot;</span>
<span class="nv">xy_seattle</span><span class="o">=</span><span class="s2">&quot;47:36:35N, 122:19:59W&quot;</span>
<span class="nv">land_color</span><span class="o">=</span><span class="s2">&quot;#CEB9A0&quot;</span>
<span class="nv">gcp_color</span><span class="o">=</span><span class="s2">&quot;#0044FF&quot;</span>        <span class="c1"># 大圓路徑的顏色</span>
<span class="nv">psl_color</span><span class="o">=</span><span class="s2">&quot;#FF0073&quot;</span>        <span class="c1"># 恆向線的顏色</span>
    <span class="c1"># 把兩個城市的 xy 座標寫入 $input_xy 檔案中。</span>
    <span class="c1"># 如果你已經下載了 coord.txt，以下兩行可以註解掉。</span>
<span class="nb">echo</span> <span class="nv">$xy_ulaanbaatar</span> &gt; <span class="nv">$input_xy</span>
<span class="nb">echo</span> <span class="nv">$xy_seattle</span>    &gt;&gt; <span class="nv">$input_xy</span>

<span class="c1"># ==== 調整 GMT 預設參數 ====</span>
gmtset <span class="nv">FONT_TITLE</span><span class="o">=</span><span class="m">30</span>,Bookman-Demi,#0D057A <span class="se">\</span>
       <span class="nv">FONT_ANNOT_PRIMARY</span><span class="o">=</span>12p,20,#0D057A <span class="se">\</span>
       <span class="nv">FORMAT_GEO_MAP</span><span class="o">=</span>dddF <span class="se">\</span>
       <span class="nv">MAP_FRAME_TYPE</span><span class="o">=</span>plain <span class="se">\</span>
       <span class="nv">MAP_GRID_CROSS_SIZE_PRIMARY</span><span class="o">=</span>8p <span class="se">\</span>
       <span class="nv">MAP_GRID_PEN_PRIMARY</span><span class="o">=</span>thinner,#ED99F0 <span class="se">\</span>
       <span class="nv">MAP_TICK_PEN_PRIMARY</span><span class="o">=</span>thicker,black <span class="se">\</span>
       <span class="nv">MAP_TITLE_OFFSET</span><span class="o">=</span><span class="m">0</span>.5c <span class="se">\</span>
       <span class="nv">MAP_ORIGIN_X</span><span class="o">=</span><span class="m">0</span> <span class="se">\</span>
       <span class="nv">MAP_ANNOT_OBLIQUE</span><span class="o">=</span><span class="m">32</span> <span class="se">\</span>
       <span class="nv">PS_CHAR_ENCODING</span><span class="o">=</span>ISOLatin1+ <span class="se">\</span>
       <span class="nv">PS_PAGE_ORIENTATION</span><span class="o">=</span>portrait <span class="se">\</span>
       <span class="nv">PS_PAGE_COLOR</span><span class="o">=</span>ivory

<span class="c1"># ==== 開門 (寫入 PS 檔頭) ====</span>
psxy -R0/1/0/1 -JX1c -T -K &gt; <span class="nv">$out_ps</span>

<span class="c1"># ==== 下圖 (麥卡托) ====</span>
psbasemap -R70/270/30S/70N -JM13c -O -K -X4c -B+tMercator &gt;&gt; <span class="nv">$out_ps</span>
pscoast -R -J -O -K -Dl -A1000 -G<span class="nv">$land_color</span> -N1/thick,60 -Ba40f20g20 <span class="se">\</span>
        --MAP_GRID_PEN_PRIMARY<span class="o">=</span>thicker &gt;&gt; <span class="nv">$out_ps</span>
psxy <span class="nv">$input_xy</span> -R -J -O -K -: -A -W1p,<span class="nv">$psl_color</span> &gt;&gt; <span class="nv">$out_ps</span>    <span class="c1"># 恆向線</span>
psxy <span class="nv">$input_xy</span> -R -J -O -K -:    -W1p,<span class="nv">$gcp_color</span> &gt;&gt; <span class="nv">$out_ps</span>    <span class="c1"># 大圓路徑</span>
psxy <span class="nv">$input_xy</span> -R -J -O -K -:    -Sa0.4c -Gblack &gt;&gt; <span class="nv">$out_ps</span>    <span class="c1"># 點</span>
    <span class="c1"># 線的說明文字</span>
<span class="nb">echo</span> <span class="s2">&quot;174 41 Rhumb Line&quot;</span>              <span class="p">|</span> pstext -R -J -O -K -F+f,18,<span class="nv">$psl_color</span> &gt;&gt; <span class="nv">$out_ps</span>
<span class="nb">echo</span> <span class="s2">&quot;174 61 Great Circle Path&quot;</span>       <span class="p">|</span> pstext -R -J -O -K -F+f,18,<span class="nv">$gcp_color</span> &gt;&gt; <span class="nv">$out_ps</span>

<span class="c1"># ==== 上圖 (蘭伯特) ====</span>
psbasemap -Rg -JA106:55/47:55/13c -O -K -Y12c -B+tLambert <span class="se">\</span>
        --MAP_TITLE_OFFSET<span class="o">=</span>0c &gt;&gt; <span class="nv">$out_ps</span>
pscoast -R -J -O -K -Dl -A1000 -G<span class="nv">$land_color</span> -N1/thick,60 -Bxg60 -Byg30 <span class="se">\</span>
        --MAP_GRID_CROSS_SIZE_PRIMARY<span class="o">=</span>0p &gt;&gt; <span class="nv">$out_ps</span>
project -C106.92/47.92 -E237.67/47.61 -G10 -N <span class="p">|</span><span class="se">\</span>
psxy           -R -J -O -K    -W1p,<span class="nv">$psl_color</span> &gt;&gt; <span class="nv">$out_ps</span>    <span class="c1"># 恆向線</span>
psxy <span class="nv">$input_xy</span> -R -J -O -K -: -W1p,<span class="nv">$gcp_color</span> &gt;&gt; <span class="nv">$out_ps</span>    <span class="c1"># 大圓路徑</span>
psxy <span class="nv">$input_xy</span> -R -J -O -K -: -Sa0.4c -Gblack &gt;&gt; <span class="nv">$out_ps</span>    <span class="c1"># 點</span>
    <span class="c1"># 加座標</span>
pstext -R -J -O -K -F+a   &gt;&gt; <span class="nv">$out_ps</span> <span class="s">&lt;&lt; ANNOTEND</span>
<span class="s">106.92 -30 0   30\260S</span>
<span class="s">106.92 30  0   30\260N</span>
<span class="s">60     15  70  60\260E</span>
<span class="s">180    15  305 180\260</span>
<span class="s">ANNOTEND</span>
    <span class="c1"># 線的說明文字</span>
pstext -R -J -O -K -F+a+f &gt;&gt; <span class="nv">$out_ps</span> <span class="s">&lt;&lt; LABELEND</span>
<span class="s">180    40  58  ,Bookman-DemiItalic,$psl_color   Rhumb Line</span>
<span class="s">180    80  58  ,Bookman-DemiItalic,$gcp_color   Great Circle Path</span>
<span class="s">LABELEND</span>

<span class="c1"># ==== 關門 (寫入 EOF) ====</span>
psxy -R -J -O -T &gt;&gt; <span class="nv">$out_ps</span>
<span class="c1"># rm -rf gmt.conf    # &lt;---- 此行可用於消除舊的組態設定檔</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">備註</p>
<p class="last">「繪製大圓路徑與恆向線。版面與地圖框線、標示的外貌與位置皆經過微調，先畫下圖 (麥卡托投影) 再畫上圖 (蘭伯特投影)，而在上圖中，恆向線的路徑須經由
<code class="docutils literal notranslate"><span class="pre">project</span></code> 產生，在腳本中也額外標上了上圖的格線經緯度。」</p>
</div>
<p>觀看<a class="reference internal" href="#id5">最終版地圖</a></p>
</div>
<div class="section" id="id13">
<h2>10.6. 習題<a class="headerlink" href="#id13" title="本標題的永久連結">¶</a></h2>
<p>畫出跟下圖越相似越好的赤道幾內亞 (Equatorial Guinea) 地圖<a class="footnote-reference" href="#id15" id="id14">[1]</a>，但不用標上道路、鄉鎮市名稱、地理名稱與比例尺，紅色圓圈與連接紅色圓圈的黑色虛線則須標明，喀麥隆 (Cameroon)、加彭 (Gabon) 與聖多美普林西比
(São Tomé e Príncipe) 的國名也必須標出，地圖中的五個大島嶼的名稱也要顯示在地圖上。地圖左上方的位置示意圖，可看待為第二張地圖，利用 <code class="docutils literal notranslate"><span class="pre">-X</span></code> 與 <code class="docutils literal notranslate"><span class="pre">-Y</span></code> 選擇位置並疊在第一張地圖上。</p>
<img alt="_images/gq_blu.gif" src="_images/gq_blu.gif" />
<table class="docutils footnote" frame="void" id="id15" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id14">[1]</a></td><td><a class="reference external" href="http://ian.macky.net/pat/map/gq/gq.html">Public domain country maps</a>.</td></tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="hillshading.html" class="btn btn-neutral float-right" title="11. 暈渲地圖" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="plot_vector_data.html" class="btn btn-neutral float-left" title="9. 繪製向量式資料" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

 <div id="disqus_thread"></div> <script> var disqus_config = function () {this.page.url = 'http://gmt-tutorial.org/layout_design.html'; this.page.identifier = 'layout_design'; }; (function() { var d = document, s = d.createElement('script'); s.src = '//gmt-tutorials.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-19, 鄭懷傑 (Whyjay Zheng)
      <span class="lastupdated">
        最後更新於 3月 30, 2020。
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>
