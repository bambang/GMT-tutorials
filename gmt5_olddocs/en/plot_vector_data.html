

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en-US" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en-US" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>9. Plot Vector Data &mdash; GMT Tutorials v1.2</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
 <link href='https://fonts.googleapis.com/css?family=Varela Round' rel='stylesheet'>
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/style.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="10. Design Map Layout" href="layout_design.html" />
    <link rel="prev" title="8. Visualize Raster Data Using a Colormap" href="cpt_colormap.html" /> 
</head>
 <script type="text/javascript">var _jf = _jf || [];_jf.push(['p','39630']);_jf.push(['_setFont','sourcehansans-tc-light','css','.sourcehansans-tc-light']);_jf.push(['_setFont','sourcehansans-tc-light','alias','sourcehansans-tc']);_jf.push(['_setFont','sourcehansans-tc-light','weight',200]);_jf.push(['_setFont','sourcehansans-tc-regular','css','.sourcehansans-tc-regular']);_jf.push(['_setFont','sourcehansans-tc-regular','alias','sourcehansans-tc']);_jf.push(['_setFont','sourcehansans-tc-regular','weight',400]);_jf.push(['_setFont','cwtexqyuan','css','.cwtexqyuan']);_jf.push(['_setFont','cwtexqyuan','alias','cwtexqyuan']);_jf.push(['_setFont','cwtexqyuan','weight',500]);_jf.push(['_setFont','xingothic-tc-w7','css','.xingothic-tc-w7']);_jf.push(['_setFont','xingothic-tc-w7','alias','xingothic-tc']);_jf.push(['_setFont','xingothic-tc-w7','weight',700]);_jf.push(['_setFont','jf-jinxuan-medium','css','.jf-jinxuan-medium']);_jf.push(['_setFont','jf-jinxuan-medium','alias','jf-jinxuan']);_jf.push(['_setFont','jf-jinxuan-medium','weight',600]);(function(f,q,c,h,e,i,r,d){var k=f._jf;if(k.constructor===Object){return}var l,t=q.getElementsByTagName("html")[0],a=function(u){for(var v in k){if(k[v][0]==u){if(false===k[v][1].call(k)){break}}}},j=/\S+/g,o=/[\t\r\n\f]/g,b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,g="".trim,s=g&&!g.call("\uFEFF\xA0")?function(u){return u==null?"":g.call(u)}:function(u){return u==null?"":(u+"").replace(b,"")},m=function(y){var w,z,v,u,x=typeof y==="string"&&y;if(x){w=(y||"").match(j)||[];z=t[c]?(" "+t[c]+" ").replace(o," "):" ";if(z){u=0;while((v=w[u++])){if(z.indexOf(" "+v+" ")<0){z+=v+" "}}t[c]=s(z)}}},p=function(y){var w,z,v,u,x=arguments.length===0||typeof y==="string"&&y;if(x){w=(y||"").match(j)||[];z=t[c]?(" "+t[c]+" ").replace(o," "):"";if(z){u=0;while((v=w[u++])){while(z.indexOf(" "+v+" ")>=0){z=z.replace(" "+v+" "," ")}}t[c]=y?s(z):""}}},n;k.push(["_eventActived",function(){p(h);m(e)}]);k.push(["_eventInactived",function(){p(h);m(i)}]);k.addScript=n=function(u,A,w,C,E,B){E=E||function(){};B=B||function(){};var x=q.createElement("script"),z=q.getElementsByTagName("script")[0],v,y=false,D=function(){x.src="";x.onerror=x.onload=x.onreadystatechange=null;x.parentNode.removeChild(x);x=null;a("_eventInactived");B()};if(C){v=setTimeout(function(){D()},C)}x.type=A||"text/javascript";x.async=w;x.onload=x.onreadystatechange=function(G,F){if(!y&&(!x.readyState||/loaded|complete/.test(x.readyState))){y=true;if(C){clearTimeout(v)}x.src="";x.onerror=x.onload=x.onreadystatechange=null;x.parentNode.removeChild(x);x=null;if(!F){setTimeout(function(){E()},200)}}};x.onerror=function(H,G,F){if(C){clearTimeout(v)}D();return true};x.src=u;z.parentNode.insertBefore(x,z)};a("_eventPreload");m(h);n(r,"text/javascript",false,3000)})(this,this.document,"className","jf-loading","jf-active","jf-inactive","//ds.justfont.com/js/stable/v/5.0.2/id/166657211014");</script>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> GMT Tutorials 
          

          
          </a>

          
            
            
              <div class="version">
                1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
 <div class="langcenter"> <nav class="menu"> <ul class="clearfix"> <li class="current-item"> <a href="#" class="clicker">English <span class="arrow">&#9660;</span></a> <ul class="sub-menu"> <li><a href="../plot_vector_data.html">中文 (台灣)</a></li> <li><a href="plot_vector_data.html">English</a></li> </ul> </li> </ul> </nav> </div>
 </div>
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro_install.html">1. Introduction and Installing GMT</a></li>
<li class="toctree-l1"><a class="reference internal" href="software.html">2. Software and Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_concept.html">3. Basic Concepts and Terms</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_first_map.html">4. Make Your First Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="coloring_topography.html">5. Color the Topography</a></li>
<li class="toctree-l1"><a class="reference internal" href="pen_and_painting.html">6. Pen and Painting</a></li>
<li class="toctree-l1"><a class="reference internal" href="scatter_plot.html">7. Scatter Plot</a></li>
<li class="toctree-l1"><a class="reference internal" href="cpt_colormap.html">8. Visualize Raster Data Using a Colormap</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">9. Plot Vector Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id2">9.1. Goal</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id5">9.2. Commands and Techniques</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id6">9.3. Procedure</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id10">9.4. Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id11">9.5. 習題</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="layout_design.html">10. Design Map Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="hillshading.html">11. Hillshade Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="contour_and_profile.html">12. Contours and Profiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="map_elements.html">13. Add Map Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="editing_cpt_colorbar.html">14. Edit CPT and Colorbar</a></li>
<li class="toctree-l1"><a class="reference internal" href="view3d.html">15. 3D Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="focal_mech.html">16. Plot Focal Mechanisms</a></li>
<li class="toctree-l1"><a class="reference internal" href="draping.html">17. Drape an Image over Topography</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_calculator.html">18. Raster Calculator</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_img_processing.html">19. Basic Image Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="stat_histogram.html">20. Statistics and Histogram</a></li>
<li class="toctree-l1"><a class="reference internal" href="regression_basics.html">21. Perform Regression Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_credit.html">22. Data credits and References</a></li>
<li class="toctree-l1"><a class="reference internal" href="command_index.html">23. Command Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="gallery.html">24. Gallery (Chapter Index)</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GMT Tutorials </a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>9. Plot Vector Data</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
 <a href="https://github.com/whyjz/GMT-tutorials"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/e7bbb0521b397edbd5fe43e7f760759336b5e05f/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"></a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>9. Plot Vector Data<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>地理空間資料通常會以網格形式或向量形式儲存。所謂的向量式資料，其實就是描述「點、線、面」位置與形狀的資料。有關於如何繪製點資料的技巧，我們已經在「<a class="reference internal" href="scatter_plot.html"><span class="doc">Scatter Plot</span></a>」一章中提及，因此在本章中，將會說明如何利用 GMT 繪製線段以及多邊形、簡介與 GMT 相容的向量式資料檔案格式，以及透明度的設定–這種填色技巧非常適合用在常常需要疊在一起呈現的向量式資料上。</p>
<div class="section" id="id2">
<h2>9.1. Goal<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>繪製一張<a class="reference external" href="https://zh.wikipedia.org/wiki/%E4%B8%83%E5%B7%A7%E6%9D%BF">七巧板</a>的盤面，如下所示。七巧板是一種類似拼圖的玩具，遊玩目標通常是利用 7 個多邊形拼出指定的圖案。這邊拼出的是正方形，也是所有的圖案裡最基本的一種。</p>
<p>在此圖中，七個多邊形顏色均不相同，但都有黑色邊緣，而且在盤面上還有淡色的棋盤式格子，可以幫助你計算每個多邊形的大小。要讓這些線條與多邊形的顏色同時呈現，我們必須要在色階檔中加上透明度的設定，並且使用不同的出圖指令。</p>
<img alt="_images/tangram.png" id="id4" src="_images/tangram.png" />
<p>直接觀看<a class="reference internal" href="#id10">指令稿</a></p>
</div>
<div class="section" id="id5">
<h2>9.2. Commands and Techniques<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">makecpt</span></code> - <strong>製作含有透明度設定的色階檔</strong></li>
<li><code class="docutils literal notranslate"><span class="pre">psxy</span></code> - <strong>繪製線段與多邊形</strong>、輸出檔頭與檔尾</li>
<li><code class="docutils literal notranslate"><span class="pre">psconvert</span></code> - <strong>把 ps 檔轉成 png 檔並保留透明度設定</strong></li>
</ul>
</div>
<div class="section" id="id6">
<h2>9.3. Procedure<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<p>讓我們先來看看 <code class="docutils literal notranslate"><span class="pre">psxy</span></code> 是怎麼處理線段和多邊形資料的。一般來說，這類型的資料會以文字格式儲存在個別的檔案中，然後我們再使用 <code class="docutils literal notranslate"><span class="pre">psxy</span></code>
來讀取他們，像是如下的示意語法：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ psxy 輸入檔名稱 <span class="o">[</span>選項...<span class="o">]</span> &gt; 輸出的 ps 檔
</pre></div>
</div>
<p>線段顧名思義，就是很多個頂點連起來的線條。GMT 可接受的線段檔案格式，如下所示：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; <span class="o">[</span>線段 <span class="m">1</span> 的設定<span class="o">]</span>
線段 <span class="m">1</span> 的頂點 <span class="m">1</span>
線段 <span class="m">1</span> 的頂點 <span class="m">2</span>
...
&gt; <span class="o">[</span>線段 <span class="m">2</span> 的設定<span class="o">]</span>
線段 <span class="m">2</span> 的頂點 <span class="m">1</span>
線段 <span class="m">2</span> 的頂點 <span class="m">2</span>
...
&gt; <span class="o">[</span>線段 <span class="m">3</span> 的設定<span class="o">]</span>
...
</pre></div>
</div>
<p>如果是二維線段，頂點就是兩欄資料，分別為 X 座標和 Y 座標。因為是線段，所以每條線至少都要有 2 個頂點。不同線段之間預設以 <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> 符號隔開，符號後方可以接上 <code class="docutils literal notranslate"><span class="pre">-W</span></code> 或 <code class="docutils literal notranslate"><span class="pre">-Z</span></code>，代表者 <code class="docutils literal notranslate"><span class="pre">psxy</span></code> 在畫圖的時候會對這條線使用的繪圖選項：</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">-W</span></code>：指定畫筆樣式</li>
<li><code class="docutils literal notranslate"><span class="pre">-Z</span></code>：藉由給定色階檔的數值指定顏色</li>
</ul>
<p>詳細的說明請參考<a class="reference external" href="http://gmt.soest.hawaii.edu/doc/5.3.2/psxy.html#segment-header-parsing">這裡</a>。我們就來研究一下，如果要畫出七巧板的背景網格，需要怎麼樣的線段檔案：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; -W3p,black,.
<span class="m">1</span> <span class="m">0</span>
<span class="m">1</span> <span class="m">4</span>
&gt;
<span class="m">2</span> <span class="m">0</span>
<span class="m">2</span> <span class="m">4</span>
&gt;
<span class="m">3</span> <span class="m">0</span>
<span class="m">3</span> <span class="m">4</span>
&gt;
<span class="m">0</span> <span class="m">1</span>
<span class="m">4</span> <span class="m">1</span>
&gt;
<span class="m">0</span> <span class="m">2</span>
<span class="m">4</span> <span class="m">2</span>
&gt;
<span class="m">0</span> <span class="m">3</span>
<span class="m">4</span> <span class="m">3</span>
</pre></div>
</div>
<p>在此檔案中，總共有 6 條線段，前三條是直線，後三條是橫線。以第 1 條為例，它是從座標 (1, 0) 到 (1, 4) 的線段。第一條線段的 <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> 符號後面有 <code class="docutils literal notranslate"><span class="pre">-W</span></code> 設定，意味著這條線要使用黑色、點點樣式和 3p 寬度來繪製。之後所有的 <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> 符號後面都沒有任何設定，
<code class="docutils literal notranslate"><span class="pre">psxy</span></code> 在繪圖的時候，會<strong>自動沿用之前已經設定過的參數值</strong>，因此後五條線畫出來的外觀會與第一條相同。把檔案存為 <code class="docutils literal notranslate"><span class="pre">lines.txt</span></code>，然後使用如下指令，就可以畫出背景網格。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ psxy lines.txt -R0/4/0/4 -JX15c -P &gt; lines.ps
</pre></div>
</div>
<img alt="_images/plot_vector_data_fig1.png" src="_images/plot_vector_data_fig1.png" />
<p>看起來還不錯！接下來讓我們看一下要怎麼畫多邊形。其實多邊形資料與線段大同小異，就是把所有的頂點座標紀錄在檔案內而已；不過，多邊形的頂點數目最少要有 3 個。GMT 可接受的多邊形檔案格式，如下所示：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; <span class="o">[</span>多邊形 <span class="m">1</span> 的設定<span class="o">]</span>
多邊形 <span class="m">1</span> 的頂點 <span class="m">1</span>
多邊形 <span class="m">1</span> 的頂點 <span class="m">2</span>
多邊形 <span class="m">1</span> 的頂點 <span class="m">3</span>
...
&gt; <span class="o">[</span>多邊形 <span class="m">2</span> 的設定<span class="o">]</span>
...
</pre></div>
</div>
<p>分隔符號後方可以接上 <code class="docutils literal notranslate"><span class="pre">-W</span></code>、<code class="docutils literal notranslate"><span class="pre">-Z</span></code> 或 <code class="docutils literal notranslate"><span class="pre">-G</span></code> (詳細的說明請參考<a class="reference external" href="http://gmt.soest.hawaii.edu/doc/5.3.2/psxy.html#segment-header-parsing">這裡</a>)：</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">-W</span></code>：指定多邊形的外框畫筆樣式</li>
<li><code class="docutils literal notranslate"><span class="pre">-Z</span></code>：藉由給定色階檔的數值指定多邊形填色</li>
<li><code class="docutils literal notranslate"><span class="pre">-G</span></code>：直接指定多邊形填色</li>
</ul>
<p>例如，要畫出七巧板上的圖形，我們可以使用如下的檔案內容：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; -Z0
<span class="m">0</span> <span class="m">0</span>
<span class="m">2</span> <span class="m">2</span>
<span class="m">4</span> <span class="m">0</span>
&gt; -Z3
<span class="m">0</span> <span class="m">0</span>
<span class="m">2</span> <span class="m">2</span>
<span class="m">0</span> <span class="m">4</span>
&gt; -Z6
<span class="m">0</span> <span class="m">4</span>
<span class="m">1</span> <span class="m">3</span>
<span class="m">2</span> <span class="m">4</span>
&gt; -Z9
<span class="m">1</span> <span class="m">3</span>
<span class="m">2</span> <span class="m">4</span>
<span class="m">3</span> <span class="m">3</span>
<span class="m">2</span> <span class="m">2</span>
&gt; -Z12
<span class="m">3</span> <span class="m">3</span>
<span class="m">2</span> <span class="m">2</span>
<span class="m">3</span> <span class="m">1</span>
&gt; -Z15
<span class="m">3</span> <span class="m">1</span>
<span class="m">3</span> <span class="m">3</span>
<span class="m">4</span> <span class="m">2</span>
<span class="m">4</span> <span class="m">0</span>
&gt; -Z18
<span class="m">2</span> <span class="m">4</span>
<span class="m">4</span> <span class="m">2</span>
<span class="m">4</span> <span class="m">4</span>
</pre></div>
</div>
<p>第一個多邊形是七巧板底部的大三角形，座標從 (0, 0)、(2, 2) 到 (4, 0)，各位可以試試看找出其他六個多邊形分別是什麼形狀。注意在每個多邊形的 <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> 後方都有 <code class="docutils literal notranslate"><span class="pre">-Z</span></code> 設定，代表著我們只要給定色階檔，GMT 就會自動的依照 Z 值與色階檔的對應，為每個多邊形填上不同的顏色。在 GMT 中，有一個稱為「<strong>wysiwyg</strong><a class="footnote-reference" href="#id12" id="id9">[1]</a>」的色階檔，最適合用來當這種依照數值指定不同種類顏色的參考色階。它的顏色如下所示：</p>
<img alt="_images/plot_vector_data_fig2.png" src="_images/plot_vector_data_fig2.png" />
<p>把以上的文字檔案另存成 <code class="docutils literal notranslate"><span class="pre">pieces.txt</span></code>，然後使用如下的指令繪圖：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ makecpt -Cwysiwyg &gt; tangram.cpt
$ psxy pieces.txt -R0/4/0/4 -JX15c -P -L -Ctangram.cpt &gt; pieces.ps
</pre></div>
</div>
<p>注意這裡的 <code class="docutils literal notranslate"><span class="pre">-L</span></code>，這個參數會告訴 <code class="docutils literal notranslate"><span class="pre">psxy</span></code> 我們畫的是多邊形，如此一來 <code class="docutils literal notranslate"><span class="pre">psxy</span></code> 才會<strong>強制封閉線段並在內部填色</strong>。</p>
<img alt="_images/plot_vector_data_fig3.png" src="_images/plot_vector_data_fig3.png" />
<p>這下子七巧板也有模有樣了！我們順便來加上邊框：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ psxy pieces.txt -R0/4/0/4 -JX15c -P -L -W2p,black -Ctangram.cpt &gt; pieces.ps
</pre></div>
</div>
<img alt="_images/plot_vector_data_fig4.png" src="_images/plot_vector_data_fig4.png" />
<p>看起來非常不錯，不過請注意到圖形的角落，例如左下角，有一些小小的線段突出來了。這是因為使用這種方式繪製的邊框是沿著多邊形邊邊描繪，因此原本的各個多邊形會稍稍放大一點點。如果你覺得這沒關係，那倒無妨；但如果你是個完美主義者，不想看到任何東西突出在正方形方框外面，可以選擇的替代方案，就是把多邊形邊框挪到 <code class="docutils literal notranslate"><span class="pre">lines.txt</span></code> 裡面做成線段資料，與網格線條一起繪製。因此，我們的 <code class="docutils literal notranslate"><span class="pre">lines.txt</span></code> 要多增加幾行資訊：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; -W1p,grey,.
<span class="m">1</span> <span class="m">0</span>
<span class="m">1</span> <span class="m">4</span>
&gt;
<span class="m">2</span> <span class="m">0</span>
<span class="m">2</span> <span class="m">4</span>
&gt;
<span class="m">3</span> <span class="m">0</span>
<span class="m">3</span> <span class="m">4</span>
&gt;
<span class="m">0</span> <span class="m">1</span>
<span class="m">4</span> <span class="m">1</span>
&gt;
<span class="m">0</span> <span class="m">2</span>
<span class="m">4</span> <span class="m">2</span>
&gt;
<span class="m">0</span> <span class="m">3</span>
<span class="m">4</span> <span class="m">3</span>
&gt; -W2p,black
<span class="m">0</span> <span class="m">0</span>
<span class="m">4</span> <span class="m">0</span>
<span class="m">4</span> <span class="m">4</span>
<span class="m">0</span> <span class="m">4</span>
<span class="m">0</span> <span class="m">0</span>
&gt;
<span class="m">0</span> <span class="m">4</span>
<span class="m">4</span> <span class="m">0</span>
&gt;
<span class="m">0</span> <span class="m">0</span>
<span class="m">3</span> <span class="m">3</span>
&gt;
<span class="m">3</span> <span class="m">1</span>
<span class="m">3</span> <span class="m">3</span>
&gt;
<span class="m">1</span> <span class="m">3</span>
<span class="m">2</span> <span class="m">4</span>
&gt;
<span class="m">2</span> <span class="m">4</span>
<span class="m">4</span> <span class="m">2</span>
</pre></div>
</div>
<p>後半從 <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">-W2p,black</span></code> 開始的部份，就是七巧板邊框與拼圖的邊界線段。讓我們再試一次以下指令：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ psxy lines.txt -R0/4/0/4 -JX15c -P &gt; lines.ps
</pre></div>
</div>
<img alt="_images/plot_vector_data_fig5.png" src="_images/plot_vector_data_fig5.png" />
<p>看起來賞心悅目多了！最後的問題，就是把多邊形和線條疊加在一起。在套疊許多地理資料時，<strong>透明度</strong>是一大利器，讓你可以同時瀏覽許多不同類型的資料，又不會擋到彼此。在本章中，我們就來試試看使用具有透明度的顏色。首先要從製作色階檔開始，<code class="docutils literal notranslate"><span class="pre">makecpt</span></code> 的 <code class="docutils literal notranslate"><span class="pre">-A</span></code> 選項是用來指定透明度的：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ makecpt -Cwysiwyg -A70 &gt; tangram.cpt
<span class="c1"># -A: %70 透明</span>
</pre></div>
</div>
<p>這時色階檔的內容會像是</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">0</span>    <span class="m">64</span>/0/64@70    <span class="m">1</span>    <span class="m">64</span>/0/64@70
<span class="m">1</span>    <span class="m">64</span>/0/192@70   <span class="m">2</span>    <span class="m">64</span>/0/192@70
... <span class="o">(</span>以下略<span class="o">)</span>
</pre></div>
</div>
<p>在 <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> 符號後面的就是透明度，因此整個顏色的格式為：<code class="docutils literal notranslate"><span class="pre">紅/綠/藍&#64;透明度</span></code>。使用此色階檔畫圖，所有的顏色就會被套上透明度設定。問題是，PostScript 格式其實是不支援透明度的，就算你設定了透明選項，直接打開 .ps 檔的話，仍然不會看到任何改變。幸好，GMT 提供了一個指令 <code class="docutils literal notranslate"><span class="pre">psconvert</span></code>，可以把 .ps 檔中不能顯示的透明度設定，轉檔成別的格式以成功顯示。它的語法為</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ psconvert 輸入的ps檔 -T輸出檔格式 <span class="o">[</span>其他選項...<span class="o">]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">輸出檔格式</span></code> 使用單一字母來指定，例如 <code class="docutils literal notranslate"><span class="pre">g</span></code> 是 PNG，<code class="docutils literal notranslate"><span class="pre">f</span></code> 是 PDF 等等。在最終的指令稿中，我們使用的格式和選項如下所示：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ psconvert tangram.ps -Tg -A -P
<span class="c1"># -A: 裁剪至影像範圍</span>
<span class="c1"># -P: 強迫直向輸出 (我們的圖本來就是直向，所以在本例中這個不加也沒差，但一律加上的話對其他不同的情況很方便)</span>
</pre></div>
</div>
<p>輸出檔會自動的把 <code class="docutils literal notranslate"><span class="pre">.ps</span></code> 改成 <code class="docutils literal notranslate"><span class="pre">.png</span></code>，主檔名則維持不變，但這下子你就能看到透明、粉嫩粉嫩的顏色了！</p>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p>在舊的 GMT 腳本中，這個功能是由 <code class="docutils literal notranslate"><span class="pre">ps2raster</span></code> 指令負責執行，但在 GMT 5 中，<code class="docutils literal notranslate"><span class="pre">ps2raster</span></code> 預計會被 <code class="docutils literal notranslate"><span class="pre">psconvert</span></code>
逐步取代。因此，如果你使用以下指令轉檔，會出現警告訊息，提醒你要把 <code class="docutils literal notranslate"><span class="pre">ps2raster</span></code> 換成 <code class="docutils literal notranslate"><span class="pre">psconvert</span></code>。</p>
<div class="last highlight-bash notranslate"><div class="highlight"><pre><span></span>ps2raster tangram.ps -Tg -A -P
</pre></div>
</div>
</div>
</div>
<div class="section" id="id10">
<h2>9.4. Script<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h2>
<p>The final script of our figure is:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ==== Setting variables ====</span>
<span class="nv">out_ps</span><span class="o">=</span><span class="s2">&quot;tangram.ps&quot;</span>
<span class="nv">in_cpt</span><span class="o">=</span><span class="s2">&quot;tangram.cpt&quot;</span>

<span class="c1"># ==== Making a colormap with transparency settings ====</span>
makecpt -Cwysiwyg -A70 &gt; <span class="nv">$in_cpt</span>

<span class="c1"># ==== Plot lines and polygons ====</span>
    <span class="c1"># Write headers and the settings of -R and -J</span>
psxy -R0/4/0/4 -JX15c -T -K -P &gt; <span class="nv">$out_ps</span>
    <span class="c1"># Note that the styles of lines and polygons are defined in their source files!</span>
psxy lines.txt -R -J -O -K &gt;&gt; <span class="nv">$out_ps</span>
psxy pieces.txt -R -J -O -K -L -C<span class="nv">$in_cpt</span> &gt;&gt; <span class="nv">$out_ps</span>
    <span class="c1"># Write EOF</span>
psxy -R -J -O -T &gt;&gt; <span class="nv">$out_ps</span>

<span class="c1"># ==== Convert to png file, keeping the transparency settings ====</span>
psconvert <span class="nv">$out_ps</span> -A -P -Tg
</pre></div>
</div>
<p>The segment data <code class="docutils literal notranslate"><span class="pre">lines.txt</span></code> are as follows, and are available for downloading <a class="reference download internal" download="" href="_downloads/04c1c0e8548996c4309236feea320f62/lines.txt"><code class="xref download docutils literal notranslate"><span class="pre">here</span></code></a>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; -W1p,grey,.
<span class="m">1</span> <span class="m">0</span>
<span class="m">1</span> <span class="m">4</span>
&gt;
<span class="m">2</span> <span class="m">0</span>
<span class="m">2</span> <span class="m">4</span>
&gt;
<span class="m">3</span> <span class="m">0</span>
<span class="m">3</span> <span class="m">4</span>
&gt;
<span class="m">0</span> <span class="m">1</span>
<span class="m">4</span> <span class="m">1</span>
&gt;
<span class="m">0</span> <span class="m">2</span>
<span class="m">4</span> <span class="m">2</span>
&gt;
<span class="m">0</span> <span class="m">3</span>
<span class="m">4</span> <span class="m">3</span>
&gt; -W2p,black
<span class="m">0</span> <span class="m">0</span>
<span class="m">4</span> <span class="m">0</span>
<span class="m">4</span> <span class="m">4</span>
<span class="m">0</span> <span class="m">4</span>
<span class="m">0</span> <span class="m">0</span>
&gt;
<span class="m">0</span> <span class="m">4</span>
<span class="m">4</span> <span class="m">0</span>
&gt;
<span class="m">0</span> <span class="m">0</span>
<span class="m">3</span> <span class="m">3</span>
&gt;
<span class="m">3</span> <span class="m">1</span>
<span class="m">3</span> <span class="m">3</span>
&gt;
<span class="m">1</span> <span class="m">3</span>
<span class="m">2</span> <span class="m">4</span>
&gt;
<span class="m">2</span> <span class="m">4</span>
<span class="m">4</span> <span class="m">2</span>
</pre></div>
</div>
<p>The polygon data <code class="docutils literal notranslate"><span class="pre">pieces.txt</span></code> are as follows, and are available at <a class="reference download internal" download="" href="_downloads/d90a4743de9298790e781d0eca1bcba9/pieces.txt"><code class="xref download docutils literal notranslate"><span class="pre">here</span></code></a>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; -Z0
<span class="m">0</span> <span class="m">0</span>
<span class="m">2</span> <span class="m">2</span>
<span class="m">4</span> <span class="m">0</span>
&gt; -Z3
<span class="m">0</span> <span class="m">0</span>
<span class="m">2</span> <span class="m">2</span>
<span class="m">0</span> <span class="m">4</span>
&gt; -Z6
<span class="m">0</span> <span class="m">4</span>
<span class="m">1</span> <span class="m">3</span>
<span class="m">2</span> <span class="m">4</span>
&gt; -Z9
<span class="m">1</span> <span class="m">3</span>
<span class="m">2</span> <span class="m">4</span>
<span class="m">3</span> <span class="m">3</span>
<span class="m">2</span> <span class="m">2</span>
&gt; -Z12
<span class="m">3</span> <span class="m">3</span>
<span class="m">2</span> <span class="m">2</span>
<span class="m">3</span> <span class="m">1</span>
&gt; -Z15
<span class="m">3</span> <span class="m">1</span>
<span class="m">3</span> <span class="m">3</span>
<span class="m">4</span> <span class="m">2</span>
<span class="m">4</span> <span class="m">0</span>
&gt; -Z18
<span class="m">2</span> <span class="m">4</span>
<span class="m">4</span> <span class="m">2</span>
<span class="m">4</span> <span class="m">4</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">「使用 <code class="docutils literal notranslate"><span class="pre">wysiwyg</span></code> 色階建立具有透明度的色階檔，接下來繪製座標格線與七巧板邊線，再使用剛才產生的色階檔為每個板塊填色。為了使透明度可見，我們使用 <code class="docutils literal notranslate"><span class="pre">psconvert</span></code> 把輸出檔轉成 PNG 格式以成功顯示。」</p>
</div>
<p>Check the <a class="reference internal" href="#id4">final figure</a></p>
</div>
<div class="section" id="id11">
<h2>9.5. 習題<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<table class="docutils footnote" frame="void" id="id12" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id9">[1]</a></td><td>What You See Is What You Get, 即「所見即所得」。</td></tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="layout_design.html" class="btn btn-neutral float-right" title="10. Design Map Layout" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="cpt_colormap.html" class="btn btn-neutral float-left" title="8. Visualize Raster Data Using a Colormap" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

 <div id="disqus_thread"></div> <script> var disqus_config = function () {this.page.url = 'http://gmt-tutorial.org/plot_vector_data.html'; this.page.identifier = 'plot_vector_data'; }; (function() { var d = document, s = d.createElement('script'); s.src = '//gmt-tutorials.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-19, 鄭懷傑 (Whyjay Zheng)
      <span class="lastupdated">
        Last updated on Mar 28, 2020.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>
