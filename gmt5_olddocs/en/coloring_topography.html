

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en-US" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en-US" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>5. Color the Topography &mdash; GMT Tutorials v1.2</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
 <link href='https://fonts.googleapis.com/css?family=Varela Round' rel='stylesheet'>
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/style.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="6. Pen and Painting" href="pen_and_painting.html" />
    <link rel="prev" title="4. Make Your First Map" href="making_first_map.html" /> 
</head>
 <script type="text/javascript">var _jf = _jf || [];_jf.push(['p','39630']);_jf.push(['_setFont','sourcehansans-tc-light','css','.sourcehansans-tc-light']);_jf.push(['_setFont','sourcehansans-tc-light','alias','sourcehansans-tc']);_jf.push(['_setFont','sourcehansans-tc-light','weight',200]);_jf.push(['_setFont','sourcehansans-tc-regular','css','.sourcehansans-tc-regular']);_jf.push(['_setFont','sourcehansans-tc-regular','alias','sourcehansans-tc']);_jf.push(['_setFont','sourcehansans-tc-regular','weight',400]);_jf.push(['_setFont','cwtexqyuan','css','.cwtexqyuan']);_jf.push(['_setFont','cwtexqyuan','alias','cwtexqyuan']);_jf.push(['_setFont','cwtexqyuan','weight',500]);_jf.push(['_setFont','xingothic-tc-w7','css','.xingothic-tc-w7']);_jf.push(['_setFont','xingothic-tc-w7','alias','xingothic-tc']);_jf.push(['_setFont','xingothic-tc-w7','weight',700]);_jf.push(['_setFont','jf-jinxuan-medium','css','.jf-jinxuan-medium']);_jf.push(['_setFont','jf-jinxuan-medium','alias','jf-jinxuan']);_jf.push(['_setFont','jf-jinxuan-medium','weight',600]);(function(f,q,c,h,e,i,r,d){var k=f._jf;if(k.constructor===Object){return}var l,t=q.getElementsByTagName("html")[0],a=function(u){for(var v in k){if(k[v][0]==u){if(false===k[v][1].call(k)){break}}}},j=/\S+/g,o=/[\t\r\n\f]/g,b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,g="".trim,s=g&&!g.call("\uFEFF\xA0")?function(u){return u==null?"":g.call(u)}:function(u){return u==null?"":(u+"").replace(b,"")},m=function(y){var w,z,v,u,x=typeof y==="string"&&y;if(x){w=(y||"").match(j)||[];z=t[c]?(" "+t[c]+" ").replace(o," "):" ";if(z){u=0;while((v=w[u++])){if(z.indexOf(" "+v+" ")<0){z+=v+" "}}t[c]=s(z)}}},p=function(y){var w,z,v,u,x=arguments.length===0||typeof y==="string"&&y;if(x){w=(y||"").match(j)||[];z=t[c]?(" "+t[c]+" ").replace(o," "):"";if(z){u=0;while((v=w[u++])){while(z.indexOf(" "+v+" ")>=0){z=z.replace(" "+v+" "," ")}}t[c]=y?s(z):""}}},n;k.push(["_eventActived",function(){p(h);m(e)}]);k.push(["_eventInactived",function(){p(h);m(i)}]);k.addScript=n=function(u,A,w,C,E,B){E=E||function(){};B=B||function(){};var x=q.createElement("script"),z=q.getElementsByTagName("script")[0],v,y=false,D=function(){x.src="";x.onerror=x.onload=x.onreadystatechange=null;x.parentNode.removeChild(x);x=null;a("_eventInactived");B()};if(C){v=setTimeout(function(){D()},C)}x.type=A||"text/javascript";x.async=w;x.onload=x.onreadystatechange=function(G,F){if(!y&&(!x.readyState||/loaded|complete/.test(x.readyState))){y=true;if(C){clearTimeout(v)}x.src="";x.onerror=x.onload=x.onreadystatechange=null;x.parentNode.removeChild(x);x=null;if(!F){setTimeout(function(){E()},200)}}};x.onerror=function(H,G,F){if(C){clearTimeout(v)}D();return true};x.src=u;z.parentNode.insertBefore(x,z)};a("_eventPreload");m(h);n(r,"text/javascript",false,3000)})(this,this.document,"className","jf-loading","jf-active","jf-inactive","//ds.justfont.com/js/stable/v/5.0.2/id/166657211014");</script>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> GMT Tutorials 
          

          
          </a>

          
            
            
              <div class="version">
                1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
 <div class="langcenter"> <nav class="menu"> <ul class="clearfix"> <li class="current-item"> <a href="#" class="clicker">English <span class="arrow">&#9660;</span></a> <ul class="sub-menu"> <li><a href="../coloring_topography.html">中文 (台灣)</a></li> <li><a href="coloring_topography.html">English</a></li> </ul> </li> </ul> </nav> </div>
 </div>
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro_install.html">1. Introduction and Installing GMT</a></li>
<li class="toctree-l1"><a class="reference internal" href="software.html">2. Software and Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_concept.html">3. Basic Concepts and Terms</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_first_map.html">4. Make Your First Map</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">5. Color the Topography</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id2">5.1. Goal</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id7">5.2. Commands and Techniques</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id8">5.3. Tasks before plotting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id9">5.4. Procedure</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id12">5.5. Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id13">5.6. Exercise</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pen_and_painting.html">6. Pen and Painting</a></li>
<li class="toctree-l1"><a class="reference internal" href="scatter_plot.html">7. Scatter Plot</a></li>
<li class="toctree-l1"><a class="reference internal" href="editing_cpt_colorbar.html">8. Edit CPT and Colorbar</a></li>
<li class="toctree-l1"><a class="reference internal" href="layout_design.html">9. Design Map Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="hillshading.html">10. Hillshade Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="contour_and_profile.html">11. Contours and Profiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot_vector_data.html">12. Plot Vector Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="map_elements.html">13. Add Map Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="view3d.html">14. 3D Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_calculator.html">15. Raster Calculator</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_img_processing.html">16. Basic Image Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="stat_histogram.html">17. Statistics and Histogram</a></li>
<li class="toctree-l1"><a class="reference internal" href="regression_basics.html">18. Perform Regression Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="focal_mech.html">19. Plot Focal Mechanisms</a></li>
<li class="toctree-l1"><a class="reference internal" href="draping.html">20. Drape an Image over Topography</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_credit.html">21. Data Credit and Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="command_index.html">22. Command Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="gallery.html">23. Gallery (Chapter Index)</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GMT Tutorials </a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>5. Color the Topography</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
 <a href="https://github.com/whyjz/GMT-tutorials"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/e7bbb0521b397edbd5fe43e7f760759336b5e05f/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"></a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>5. Color the Topography<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>To effectively visualize huge amount of data, one can use different colors on the map based on different values. One of the most frequently used values for coloring the map is definitely the surface elevation. On a classical topological map, a specific color corresponds to a specific elevation. In this chapter, we are going to see how to make a colored topological map using elevation data.</p>
<div class="section" id="id2">
<h2>5.1. Goal<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>Make a color-coded topographical map of <a class="reference external" href="https://en.wikipedia.org/wiki/Lake_Titicaca">Lake Titicaca</a> (Lago Titicaca), as the following figure shows. Lake Titicaca is a large lake between Peru and Bolivia with an area of 8372 km<sup>2</sup>. It’s generally recognized as the highest navigable lake<a class="footnote-reference" href="#id14" id="id3">[1]</a> in the world, with a surface elevation of 3812 m. The blue lines in the figure represent rivers, and note that the river to the right is actually the upstream of Amazon River, which is not connected to Lake Titicaca. A blue dashed line illustrates the political border between Peru and Bolivia. The height is color-coded from 0 to 5000 m (following the sequence: green -&gt; yellow -&gt; red -&gt; gray -&gt; white). All elevations above 2800 m are represented in grayish colors. It may give you an impression that the area around Lake Titicaca is the realm of snow since it is immersed in a white background, but actually the winter at Lake Titicaca is so dry that it rarely snow a lot<a class="footnote-reference" href="#id15" id="id4">[2]</a>.</p>
<img alt="_images/titicaca.png" id="id6" src="_images/titicaca.png" />
<p>Go to the final <a class="reference internal" href="#id12">Script</a></p>
</div>
<div class="section" id="id7">
<h2>5.2. Commands and Techniques<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">grdinfo</span></code> - <strong>display basic information from a grid file</strong></li>
<li><code class="docutils literal notranslate"><span class="pre">grdimage</span></code> - <strong>plot colored image</strong></li>
<li><code class="docutils literal notranslate"><span class="pre">pscoast</span></code> - <strong>plot rivers, lakes, and borders</strong></li>
<li>GMT shared options: <code class="docutils literal notranslate"><span class="pre">-O</span></code> <code class="docutils literal notranslate"><span class="pre">-K</span></code></li>
<li>Import gridded topography data into GMT</li>
<li>Search on <a class="reference external" href="http://soliton.vm.bytemark.co.uk/pub/cpt-city">cpt-city</a> for a color ramp that fits your map</li>
<li>How to overlay multiple layers</li>
<li>Run all of plotting commands at once using a script</li>
</ul>
</div>
<div class="section" id="id8">
<h2>5.3. Tasks before plotting<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<p>Firstly we have to get the topographical data on our desired plotting region. This type of data is sometimes like a top-secret, especially when you want to get a high-resolution regional one. Most of them are not free and charge a great amount of money for end-users, but this time we are going to use public data that have already been published online for everyone. It’s called <a class="reference external" href="https://www.ngdc.noaa.gov/mgg/global/global.html">ETOPO</a>, generated and maintained by NOAA’s National Centers for Environmental Information (NCEI). They collected elevations from several different satellite altimeters and from seafloor topography surveys, and warped them into one file with the same spatial resolution everywhere. Here we will use the ETOPO1 Bedrock database (1 arc-second spacing using bedrock elevation in the polar regions) released in <strong>netCDF</strong> format. The file can be downloaded on the <a class="reference external" href="https://www.ngdc.noaa.gov/mgg/global/global.html">ETOPO</a> website (ETOPO1 Bedrock -&gt; grid-registered: netCDF) or at here using the following link:</p>
<p><a class="reference external" href="https://www.ngdc.noaa.gov/mgg/global/relief/ETOPO1/data/bedrock/grid_registered/netcdf/ETOPO1_Bed_g_gmt4.grd.gz">Download ETOPO1 Bedrock in netCDF format</a> (383M，will be 891M after extraction)</p>
<p>You will see a file named <code class="docutils literal notranslate"><span class="pre">ETOPO1_Bed_g_gmt4.grd</span></code> in the extracted files. The file extension <code class="docutils literal notranslate"><span class="pre">.grd</span></code> suggests that it’s a “gridded” file. Imagine part of Earth’s surface is cut like a chessboard, and every cell on this chessboard has one value that represents the height of the surface. This is how a “gridded” surface would look like. (The concept of GeoTiff is really similar to this; however, we call each chessboard value a “pixel”, not a “gridded point”.) The extension <code class="docutils literal notranslate"><span class="pre">.grd</span></code> is commonly used for netCDF format, which is able to be loaded and plotted by GMT. If you want to check the information of the ETOPO <code class="docutils literal notranslate"><span class="pre">.grd</span></code> file, you can either go to the <a class="reference external" href="https://www.ngdc.noaa.gov/mgg/global/global.html">ETOPO</a> website or enter <code class="docutils literal notranslate"><span class="pre">grdinfo</span></code> in your terminal. The results would be something like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ grdinfo ETOPO1_Bed_g_gmt4.grd
ETOPO1_Bed_g_gmt4.grd: Title: ETOPO1_Bed_g_gmt4.grd
ETOPO1_Bed_g_gmt4.grd: Command:
ETOPO1_Bed_g_gmt4.grd: Remark:
ETOPO1_Bed_g_gmt4.grd: Gridline node registration used <span class="o">[</span>Geographic grid<span class="o">]</span>
ETOPO1_Bed_g_gmt4.grd: Grid file format: <span class="nv">ni</span> <span class="o">=</span> GMT netCDF format <span class="o">(</span><span class="m">32</span>-bit integer<span class="o">)</span>, COARDS, CF-1.5
ETOPO1_Bed_g_gmt4.grd: x_min: -180 x_max: <span class="m">180</span> x_inc: <span class="m">0</span>.0166666666667 name: Longitude <span class="o">[</span>degrees_east<span class="o">]</span> nx: <span class="m">21601</span>
ETOPO1_Bed_g_gmt4.grd: y_min: -90 y_max: <span class="m">90</span> y_inc: <span class="m">0</span>.0166666666667 name: Latitude <span class="o">[</span>degrees_north<span class="o">]</span> ny: <span class="m">10801</span>
ETOPO1_Bed_g_gmt4.grd: z_min: -10898 z_max: <span class="m">8271</span> name: z
ETOPO1_Bed_g_gmt4.grd: scale_factor: <span class="m">1</span> add_offset: <span class="m">0</span>
ETOPO1_Bed_g_gmt4.grd: format: classic
</pre></div>
</div>
<p>What we can get from the output text are like</p>
<ul class="simple">
<li>This gridded file’s format is netCDF, CF-1.5.</li>
<li>X is from -180 to 180 degrees, and Y is from -90 to 90 degrees. This means the file covers the entire Earth’s surface.</li>
<li>The size of each grid is 0.0166666666667, equal to one sixtieth degrees (1 arc minute).</li>
<li>There are in total of 21,601 x 10,801 = 233,312,401 grid points (that is, around one-fourth billion pixels!)</li>
<li>Z value (height) is from -10898 to 8271. Although we could not find an unit associated with the z value, it’s still easy to figure out that it’s in meters. Why is the highest point not 8848 m (the elevation of Mt. Everest)? This is because the resolution of this grid file is not fine enough. an 1-arc-minute spacing means we only take one height measurement every 1-2 km.</li>
</ul>
</div>
<div class="section" id="id9">
<h2>5.4. Procedure<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
<p>Once we get the global topography data, the next step would be deciding where on the Earth we want to plot (that is, map extent). Like we said in the previous chapter <a class="reference internal" href="making_first_map.html"><span class="doc">Make Your First Map</span></a>, we can use tools like <em>Google Map</em> to determine the region. Here we choose longitude from -70.8 to -66.56 (negative number means W) and latitude from -17.17 to -14.42 (negative number means S), based on the distribution of elevations.</p>
<div class="figure align-center" id="id16">
<img alt="_images/coloring_topography_fig1.png" src="_images/coloring_topography_fig1.png" />
<p class="caption"><span class="caption-text">The map extent viewed on <cite>Google Maps</cite>.</span></p>
</div>
<p>To use <code class="docutils literal notranslate"><span class="pre">grdimage</span></code> for plotting topography, we need to at least provide three arguments, which are <code class="docutils literal notranslate"><span class="pre">input</span> <span class="pre">file</span></code>, <code class="docutils literal notranslate"><span class="pre">-R</span></code> (map extent), and <code class="docutils literal notranslate"><span class="pre">-J</span></code> (projection and map size). Let’s make a map with the same size from the map in the <a class="reference external" href="making_first_map.html">previous chapter</a>. In the <a class="reference internal" href="basic_concept.html#terminal"><span class="std std-ref">Terminal</span></a> mode, go to the folder where <code class="docutils literal notranslate"><span class="pre">ETOPO1_Bed_g_gmt4.grd</span></code> is located, and enter the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ grdimage ETOPO1_Bed_g_gmt4.grd -R-70.8/-17.17/-66.56/-14.42r <span class="se">\</span>
           -JM6i -P &gt; titicaca.ps
</pre></div>
</div>
<p>Here we added <code class="docutils literal notranslate"><span class="pre">-P</span></code> to view the output file more easily. If you are confused about the syntax, just go to “<a class="reference internal" href="making_first_map.html"><span class="doc">Make Your First Map</span></a>” and you’ll find the detailed description. The output file <code class="docutils literal notranslate"><span class="pre">titicaca.ps</span></code> should look like this:</p>
<img alt="_images/coloring_topography_fig2.png" src="_images/coloring_topography_fig2.png" />
<p>Really hard to comprehend? This is because the default GMT color ramp doesn’t fit the map region quite well. If we don’t assign a color ramp, GMT would use one called <code class="docutils literal notranslate"><span class="pre">rainbow</span></code> for the output map. The color distribution of this color scheme is shown here:</p>
<a class="reference internal image-reference" href="_images/coloring_topography_fig3.png"><img alt="_images/coloring_topography_fig3.png" class="align-center" src="_images/coloring_topography_fig3.png" style="width: 411.59999999999997px; height: 186.89999999999998px;" /></a>
<p>The the color of <code class="docutils literal notranslate"><span class="pre">0</span></code> and the color of <code class="docutils literal notranslate"><span class="pre">1</span></code> – that is, purple and red – would correspond to the lowest and the highest point on the map. Is there any way to change the color ramp which is better? Of course the answer is yes; GMT has several ways to create your own color ramp or adjust an existing one, but here we are going to see the simplest method: downloading a ready-to-use color ramp from the Internet.</p>
<p>The website <a class="reference external" href="http://soliton.vm.bytemark.co.uk/pub/cpt-city">cpt-city</a> has collected many common color ramps, including those in the GMT format. GMT-formatted color ramps usually use the file extension <code class="docutils literal notranslate"><span class="pre">.cpt</span></code>, which represents “color palette table”. You can look for the color ramp you want on the website; for example, <a class="reference external" href="http://soliton.vm.bytemark.co.uk/pub/cpt-city/views/totp-cpt.html">this page</a> lists the most-downloaded <code class="docutils literal notranslate"><span class="pre">.cpt</span></code> files. Here we are going to use the one called <code class="docutils literal notranslate"><span class="pre">mby</span></code>. Click the <code class="docutils literal notranslate"><span class="pre">mby</span></code> color ramp, and you should see the following page:</p>
<img alt="_images/coloring_topography_fig4.png" class="align-center" src="_images/coloring_topography_fig4.png" />
<p>Note that the number <strong>-8000 … 5000</strong> means that this color ramp has been adjusted to illustrate elevations between -8000 and 5000 (presumably in meters). Click the link to <cite>cpt</cite> on the page to download this color ramp.</p>
<p>For your convenience, We also provides the download link to <code class="docutils literal notranslate"><span class="pre">mby.cpt</span></code> at <a class="reference download internal" download="" href="_downloads/c035fff865f4931b82ec21e45d136e0c/mby.cpt"><code class="xref download docutils literal notranslate"><span class="pre">here</span></code></a>.</p>
<p>If we want to assign a color ramp in our plot, we can use <code class="docutils literal notranslate"><span class="pre">-C</span></code> option in <code class="docutils literal notranslate"><span class="pre">grdimage</span></code>. It’s easy - just put the name of the ramp file directly after the <code class="docutils literal notranslate"><span class="pre">-C</span></code>. Here’s our updated command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ grdimage ETOPO1_Bed_g_gmt4.grd -R-70.8/-17.17/-66.56/-14.42r <span class="se">\</span>
           -JM6i -P -Cmby.cpt &gt; titicaca.ps
</pre></div>
</div>
<p>The map will become this</p>
<img alt="_images/coloring_topography_fig5.png" src="_images/coloring_topography_fig5.png" />
<p>Looks much better!</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you want to customize your color ramp and use whichever color you like on the map, please see “<a class="reference internal" href="#"><span class="doc">Color the Topography</span></a>” and “<a class="reference internal" href="editing_cpt_colorbar.html"><span class="doc">Edit CPT and Colorbar</span></a>”.</p>
</div>
<p>However, there is still a big problem on our map - we have already known that this whole area is mostly elevated (shown in gray-white), but we still can’t see our major target <a class="reference external" href="https://en.wikipedia.org/wiki/Lake_Titicaca">Lake Titicaca</a>. This is because  <code class="docutils literal notranslate"><span class="pre">ETOPO1_Bed_g_gmt4.grd</span></code> only contains the height data and doesn’t say anything about the types of land cover. If we only use this file, we will not be able to know where the lakes or the seas are. That’s why we have to call <code class="docutils literal notranslate"><span class="pre">pscoast</span></code> again in order to mark the location of <a class="reference external" href="https://en.wikipedia.org/wiki/Lake_Titicaca">Lake Titicaca</a>, draw the water body, and put a map frame on it.</p>
<p>From now on, we are going to run more than one command at once. Of course you can do something like entering these commands line by line on a terminal window, but the more preferred way for the ease of editing would be to write everything down in a text <a class="reference internal" href="basic_concept.html#script"><span class="std std-ref">Script</span></a>, and run this script to send all commands to the computer. Please make a new text file, entitled <code class="docutils literal notranslate"><span class="pre">titicaca.bash</span></code> or whatever you like (it’s still better to fit your system format convention). Enter the following lines:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>grdimage ETOPO1_Bed_g_gmt4.grd -R-70.8/-17.17/-66.56/-14.42r <span class="se">\</span>
         -JM6i -P -Cmby.cpt &gt; titicaca.ps
pscoast  -R-70.8/-17.17/-66.56/-14.42r -JM6i -P -Scornflowerblue <span class="se">\</span>
         -Df -Baf -B+t<span class="s2">&quot;Lago Titicaca&quot;</span> &gt; titicaca.ps
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Please go to <a class="reference internal" href="making_first_map.html"><span class="doc">Make Your First Map</span></a> for checking how to use <code class="docutils literal notranslate"><span class="pre">pscoast</span></code> options. In addition, if you are running scripts on a platform other than Linux, there will be some extra settings to make the script run more easily. Please see <a class="reference internal" href="basic_concept.html"><span class="doc">Basic Concepts and Terms</span></a> for more details.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">The <code class="docutils literal notranslate"><span class="pre">-S</span></code> option in <code class="docutils literal notranslate"><span class="pre">pscoast</span></code> is for every water body. If there are seas and lakes in your map and you want to assign different colors for seas and lakes, <code class="docutils literal notranslate"><span class="pre">-C</span></code> option can do the job for you. There is no ocean area on our map, so <code class="docutils literal notranslate"><span class="pre">-Scornflowerblue</span></code> and <code class="docutils literal notranslate"><span class="pre">-Cl/cornflowerblue</span></code> would have the same effect, although the latter only fills the color into lake areas.</p>
</div>
<p>Run this script in a terminal, and then open the output file. You’ll see a map like this:</p>
<img alt="_images/coloring_topography_fig6.png" src="_images/coloring_topography_fig6.png" />
<p>Now the lake and the frame appear, but the topography from the previous command disappears? The reason is that we used the <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> symbol twice. The <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> symbol always overwrites the contents from the previous steps. In our example, we used <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> to save the results from <code class="docutils literal notranslate"><span class="pre">pscoast</span></code> to the file, so the results from previous <code class="docutils literal notranslate"><span class="pre">grdimage</span></code> were gone. To avoid this situation, we must use <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code> symbol to save the contents from later commands into the map file. <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code> will paste the output form <code class="docutils literal notranslate"><span class="pre">pscoast</span></code> at the end of the original file. Therefore, the contents from <code class="docutils literal notranslate"><span class="pre">pscoast</span></code> would act as if a second layer overlaid on the first layer which <code class="docutils literal notranslate"><span class="pre">grdimage</span></code> generated. Let’s try to change the second <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> to <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>grdimage ETOPO1_Bed_g_gmt4.grd -R-70.8/-17.17/-66.56/-14.42r <span class="se">\</span>
         -JM6i -P -Cmby.cpt &gt; titicaca.ps
pscoast  -R-70.8/-17.17/-66.56/-14.42r -JM6i -P -Scornflowerblue <span class="se">\</span>
         -Df -Baf -B+t<span class="s2">&quot;Lago Titicaca&quot;</span> &gt;&gt; titicaca.ps
</pre></div>
</div>
<p>We can also run the updated script without any bugs, but the output file would become this:</p>
<img alt="_images/coloring_topography_fig5.png" src="_images/coloring_topography_fig5.png" />
<p>Really strange - this isn’t exactly the same from the map without <code class="docutils literal notranslate"><span class="pre">pscoast</span></code>? Yes, they are the same because the output from <code class="docutils literal notranslate"><span class="pre">pscoast</span></code> is not interpreted into part of the map. The PostScript language needs a specific line to “conclude” the file, otherwise it cannot be read. This specific line is generally called <strong>EOF</strong> (End-Of-File) character. In a default situation, every GMT command adds an EOF character in the end of the output file, and when a PS file interpreter reads an EOF character, it would stop reading. This is why we have run <code class="docutils literal notranslate"><span class="pre">pscoast</span></code> but it doesn’t show on the map. There is a universal option <code class="docutils literal notranslate"><span class="pre">-K</span></code> in GMT for this situation - it prevents a GMT comment to add an EOF in the end of the output. In our case, <code class="docutils literal notranslate"><span class="pre">-K</span></code> must be added at <code class="docutils literal notranslate"><span class="pre">grdimage</span></code> in order to not put an EOF in the middle of the final file, like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>grdimage ETOPO1_Bed_g_gmt4.grd -R-70.8/-17.17/-66.56/-14.42r <span class="se">\</span>
         -JM6i -P -Cmby.cpt -K &gt; titicaca.ps
pscoast  -R-70.8/-17.17/-66.56/-14.42r -JM6i -P -Scornflowerblue <span class="se">\</span>
         -Df -Baf -B+t<span class="s2">&quot;Lago Titicaca&quot;</span> &gt;&gt; titicaca.ps
</pre></div>
</div>
<p>The result from this script is:</p>
<img alt="_images/coloring_topography_fig7.png" src="_images/coloring_topography_fig7.png" />
<p>It still seems identical to the previous map at a first glance, but did you see the tiny little pattern at the left-bottom corner? Yes, that strange pattern is just the output from <code class="docutils literal notranslate"><span class="pre">pscoast</span></code>. It turns out that the PS interpreter does not overlay the two layers properly; instead, they mix up with a strange ratio, which is not what we want. The reason of the strange output is similar to the previous paragraph: when each GMT command is generating a map, in addition to adding an EOF, it also appends a <strong>header description</strong> to the beginning of the output. It is just like what we saw in the previous chapter, <a class="reference internal" href="making_first_map.html#ps-header"><span class="std std-ref">some text describing basic information of the map file</span></a>. If there are two headers in one file, the PS interpreter would read it incorrectly. Hence, there is also a universal option <code class="docutils literal notranslate"><span class="pre">-O</span></code>, which prevent a command from adding a header into the output file. In our example, <code class="docutils literal notranslate"><span class="pre">-O</span></code> must be added at <code class="docutils literal notranslate"><span class="pre">pscoast</span></code> in order to not put the second header in the middle of file, like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>grdimage ETOPO1_Bed_g_gmt4.grd -R-70.8/-17.17/-66.56/-14.42r <span class="se">\</span>
         -JM6i -P -Cmby.cpt -K &gt; titicaca.ps
pscoast  -R-70.8/-17.17/-66.56/-14.42r -JM6i -P -Scornflowerblue <span class="se">\</span>
         -Df -Baf -B+t<span class="s2">&quot;Lago Titicaca&quot;</span> -O &gt;&gt; titicaca.ps
</pre></div>
</div>
<p>Now the map starts to look satisfying.</p>
<img alt="_images/coloring_topography_fig8.png" src="_images/coloring_topography_fig8.png" />
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<ol class="last arabic simple">
<li>The rule of thumb for <code class="docutils literal notranslate"><span class="pre">-K</span></code> and <code class="docutils literal notranslate"><span class="pre">-O</span></code>: unless the last one, all commands should add a <code class="docutils literal notranslate"><span class="pre">-K</span></code> (which sounds like “continue”); unless the first one, all commands should add an <code class="docutils literal notranslate"><span class="pre">-O</span></code> (which is for “overlay”).</li>
<li>Let us take a look at two <code class="docutils literal notranslate"><span class="pre">-B</span></code> options at <code class="docutils literal notranslate"><span class="pre">pscoast</span></code>. Actually it is also ok to put them in <code class="docutils literal notranslate"><span class="pre">grdimage</span></code> because which layer the map frame is plotted on doesn’t really matter, and it would look totally the same.</li>
</ol>
</div>
<p>The script is still able to be shortened a little bit. <strong>For all universal GMT options, if they represent the same meaning, then default value for the latter use would be the value given at the first-time use</strong>. That said, if you have two options, each in different commands but with the same arguments, you can omit the latter argument for simplicity. In <code class="docutils literal notranslate"><span class="pre">pscoast</span></code>, <code class="docutils literal notranslate"><span class="pre">-R</span></code> and <code class="docutils literal notranslate"><span class="pre">-J</span></code> are identical to the <code class="docutils literal notranslate"><span class="pre">-R</span></code> and <code class="docutils literal notranslate"><span class="pre">-J</span></code> in <code class="docutils literal notranslate"><span class="pre">grdimage</span></code> (because it is required to have the same map extent and projection, otherwise you cannot match the two layers properly, like weird size or misplaced lines). Therefore, the parameter value of <code class="docutils literal notranslate"><span class="pre">-R</span></code> and <code class="docutils literal notranslate"><span class="pre">-J</span></code> in <code class="docutils literal notranslate"><span class="pre">grdimage</span></code> can be omitted. In addition, we have added <code class="docutils literal notranslate"><span class="pre">-P</span></code> (portrait mode) at two commands. The latter <code class="docutils literal notranslate"><span class="pre">-P</span></code> at <code class="docutils literal notranslate"><span class="pre">pscoast</span></code> doesn’t matter since GMT doesn’t allow multiple commands plotting on different size of pages, so we can also remove it without changing the output map. GMT would still use portrait mode to overlay all commands. Finally the simplified (but with the same map appearance) script is:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>grdimage ETOPO1_Bed_g_gmt4.grd -R-70.8/-17.17/-66.56/-14.42r <span class="se">\</span>
         -JM6i -P -Cmby.cpt -K &gt; titicaca.ps
pscoast  -R -J -O -Scornflowerblue <span class="se">\</span>
         -Df -Baf -B+t<span class="s2">&quot;Lago Titicaca&quot;</span> &gt;&gt; titicaca.ps
</pre></div>
</div>
<p>I moved the position of <code class="docutils literal notranslate"><span class="pre">-O</span></code> too, because it is a common option and would be easier to catch if being put at the first few positions.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">The trick why GMT can do this is that GMT actually saves these arguments in the text file <code class="docutils literal notranslate"><span class="pre">gmt.history</span></code> when we give the value the first time. This file is placed at the folder where a user runs GMT. If a user omit some argument values, GMT would search this file and load the settings given in previous time. That is, when at the second time you run the script, if the <code class="docutils literal notranslate"><span class="pre">gmt.history</span></code> still exists, you can even remove the values after <code class="docutils literal notranslate"><span class="pre">-R</span></code> and <code class="docutils literal notranslate"><span class="pre">-J</span></code> at the first line! Of course this is pretty risky because your old settings may be overwritten and your script would not be able to run. My personal recommendation is that you have to set these options up in details the first time when they appear in your script, for not causing additional troubles.</p>
</div>
<p>Now we can use other options in <code class="docutils literal notranslate"><span class="pre">pscoast</span></code> to decorate this map. First, <code class="docutils literal notranslate"><span class="pre">-I</span></code> marks rivers on the map, with the following syntax:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-Inumber/pen
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">number</span></code> is an alphanumerical letter corresponding to different levels of rivers (in terms of size), and the <a class="reference internal" href="making_first_map.html#pen"><span class="std std-ref">pen</span></a> is used for giving the appearance of these rivers. Here we use the letter <code class="docutils literal notranslate"><span class="pre">r</span></code>, corresponding to <strong>all permanent rivers</strong>, and the pen style is <code class="docutils literal notranslate"><span class="pre">0.7p,cornflowerblue</span></code>.</p>
<p>Another <code class="docutils literal notranslate"><span class="pre">pscoast</span></code> option we are going to use is <code class="docutils literal notranslate"><span class="pre">-N</span></code>, for plotting political boundaries. Its syntax is similar:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-Nnumber/pen
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">number</span></code> here, just like the previous one, is an alphanumerical letter corresponding to different tiers of political boundaries (national, state, etc.). We are going to use <code class="docutils literal notranslate"><span class="pre">1</span></code>, which means <strong>national boundaries</strong>. We use <code class="docutils literal notranslate"><span class="pre">0.7,,--</span></code> for pen attributes; note that we omit the column of “color”, so GMT would use the default “black” to plot these lines. Also, we choose <code class="docutils literal notranslate"><span class="pre">--</span></code> for “line style” so that the boundaries will be plotted in dashed lines.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For the advanced and detailed settings of the pen attributes, like line styles or custom colors using RGB values, please go to <a class="reference internal" href="pen_and_painting.html"><span class="doc">Pen and Painting</span></a>.</p>
</div>
<p>Add <code class="docutils literal notranslate"><span class="pre">-N</span></code> and <code class="docutils literal notranslate"><span class="pre">-I</span></code> and their parameters to our <code class="docutils literal notranslate"><span class="pre">pscoast</span></code> command, and finally the map design is done!</p>
</div>
<div class="section" id="id12">
<h2>5.5. Script<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h2>
<p>The final script for our map is:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>grdimage ETOPO1_Bed_g_gmt4.grd -R-70.8/-17.17/-66.56/-14.42r <span class="se">\</span>
         -JM6i -P -Cmby.cpt -K &gt; titicaca.ps
pscoast  -R -J -O -Ir/0.7p,cornflowerblue -N1/0.7p,,-- <span class="se">\</span>
         -Scornflowerblue -Df -Baf -B+t<span class="s2">&quot;Lago Titicaca&quot;</span> &gt;&gt; titicaca.ps
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">“Plot the topographical map - map extent is set to <strong>(70.8E - 66.56E，17.17S - 14.42S)</strong> in Mercator projection and <strong>6</strong> inches wide with a portrait layout. We use the color ramp from <code class="docutils literal notranslate"><span class="pre">mby.cpt</span></code>, and the full-resolution coastline data. Lakes and rivers are plotted with <code class="docutils literal notranslate"><span class="pre">cornflowerblue</span></code>. We also plot national borders, a map frame, and annotation marks. The locations and the spacing of these marks are automatically determined. We do not plot grid lines this time. The map is entitled <em>Lago Titicaca</em> and saved as <code class="docutils literal notranslate"><span class="pre">titicaca.ps</span></code>.”</p>
</div>
<p>Check the <a class="reference internal" href="#id6">final map</a></p>
</div>
<div class="section" id="id13">
<h2>5.6. Exercise<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Make a colored topographical map of <em>Lake Baikal</em> (<em>Baygal nuur</em>) and its surrounding area. Lake Baikal is the deepest lake and the seventh largest lake in the world. It is located in Russia, close to the boundary of Mongolia in the south.</li>
<li>How many rivers that are connected to Lake Baikal can you see on the map?</li>
<li>How high is the area around Lake Baikal? How high is the bottom of Lake Baikal? What colors are used to represent these two elevations on your map?</li>
</ol>
<table class="docutils footnote" frame="void" id="id14" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[1]</a></td><td><a class="reference external" href="http://www.ilec.or.jp/database/sam/dsam04.html">Data Summary: Lago Titicaca (Lake Titicaca).</a>
International Lake Environment Committee Foundation - ILEC. Retrieved 2009-01-03.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id15" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id4">[2]</a></td><td><a class="reference external" href="http://www.weather.gov.hk/wxinfo/climat/world/eng/s_america/ec_per/juliaca_e.htm">ClClimatological Information for Juliaca, Peru.</a>
Hong Kong Observatory.</td></tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="pen_and_painting.html" class="btn btn-neutral float-right" title="6. Pen and Painting" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="making_first_map.html" class="btn btn-neutral float-left" title="4. Make Your First Map" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

 <div id="disqus_thread"></div> <script> var disqus_config = function () {this.page.url = 'http://gmt-tutorial.org/coloring_topography.html'; this.page.identifier = 'coloring_topography'; }; (function() { var d = document, s = d.createElement('script'); s.src = '//gmt-tutorials.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-19, 鄭懷傑 (Whyjay Zheng)
      <span class="lastupdated">
        Last updated on Nov 25, 2019.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>
